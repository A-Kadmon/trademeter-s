<?php
    require_once './api/login.php';
    checkLogin();
?><!DOCTYPE html>
<html lang="en">
<head>
	<meta charset='utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1'>
	<title>Trademeter v 0.355</title>
	<link rel='icon' type='image/png' href='/favicon.png'>
<style>[data-theme=light],:root:not([data-theme=dark]){--bg-clr: #fff;--color: hsl(205deg, 20%, 32%);--muted-color: hsl(205deg, 10%, 50%);--muted-border-color: hsl(205deg, 20%, 94%);--primary: #4859b4;--primary-hover: hsl(195deg, 90%, 32%);--primary-focus: rgba(16, 149, 193, 0.125);--primary-inverse: #fff;--secondary: hsl(205deg, 15%, 41%);--secondary-hover: hsl(205deg, 20%, 32%);--secondary-inverse: #fff;--contrast: hsl(205deg, 30%, 15%);--contrast-hover: #000;--contrast-focus: rgba(89, 107, 120, 0.125);--ins-color: #388e3c;--del-color: #c62828;--range-brd-clr: hsl(205deg, 18%, 86%);--range--act-brd-clr: hsl(205deg, 16%, 77%);--range-thumb-color: var(--secondary);--range-thumb-hover-color: var(--secondary-hover);--progress-background-color: hsl(205deg, 18%, 86%);--progress-color: var(--primary);--loading-spinner-opacity: 0.5;color-scheme:light}[type=range]{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:100%;height:1.25rem;background:none;border:none}[type=range]:focus{box-shadow:none}[type=range]::-webkit-slider-runnable-track{width:100%;height:.25rem;border-radius:var(--brd-rds);background-color:var(--range-brd-clr);transition:background-color .3s,box-shadow .3s}[type=range]::-moz-range-track{width:100%;height:.25rem;border-radius:var(--brd-rds);background-color:var(--range-brd-clr);transition:background-color .3s,box-shadow .3s}[type=range]::-ms-track{width:100%;height:.25rem;border-radius:var(--brd-rds);background-color:var(--range-brd-clr);transition:background-color .3s,box-shadow .3s}[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:1.25rem;height:1.25rem;margin-top:-0.5rem;border:2px solid var(--bg-clr);border-radius:50%;background-color:var(--range-thumb-color);cursor:pointer;transition:background-color .3s,transform .3s}[type=range]::-moz-range-thumb{-webkit-appearance:none;width:1.25rem;height:1.25rem;margin-top:-0.5rem;border:2px solid var(--bg-clr);border-radius:50%;background-color:var(--range-thumb-color);cursor:pointer;transition:background-color .3s,transform .3s}[type=range]::-ms-thumb{-webkit-appearance:none;width:1.25rem;height:1.25rem;margin-top:-0.5rem;border:2px solid var(--bg-clr);border-radius:50%;background-color:var(--range-thumb-color);cursor:pointer;transition:background-color .3s,transform .3s}[type=range]:hover,[type=range]:focus{--range-brd-clr: var(--range--act-brd-clr);--range-thumb-color: var(--range-thumb-hover-color)}[type=range]:active{--range-thumb-color: var(--primary)}[type=range]:active::-webkit-slider-thumb{transform:scale(1.25)}[type=range]:active::-moz-range-thumb{transform:scale(1.25)}[type=range]:active::-ms-thumb{transform:scale(1.25)}*,::before,::after{box-sizing:border-box}html{line-height:1.15;-webkit-text-size-adjust:100%;font-family:system-ui,"Segoe UI",Roboto,sans-serif}body{margin:0}b,strong{font-weight:bolder}table{text-indent:0;border-color:inherit}button,input,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}button,[type=button],[type=submit]{cursor:pointer;-webkit-appearance:button}::-moz-focus-inner{border-style:none;padding:0}:-moz-focusring{outline:1px dotted ButtonText}legend{padding:0}@media(max-width: 480px){.xs-o{display:none !important}}@media(min-width: 480px){.sm-o{display:none !important}}html{font-size:18px}ul{list-style-type:none}ul.marker{list-style-type:initial}.bold{font-weight:bold}.tal{text-align:left}.tar{text-align:right}.tac{text-align:center}.tfs-1{font-size:13px}.tfs1{font-size:18px}.tfs2{font-size:29px}.tfs3{font-size:34px}.tfs4{font-size:48px}.tfc1{color:#4859b4}.tfc1-light{color:#05a5ff}.tfc2{color:#dcae1d}.tfc2-light{color:#ff4874}.tfc-g{color:gray}.tfc-w{color:#fff}.tfc-b{color:#212529}.bcc1{background-color:#4859b4}.bcc1-light{background-color:#05a5ff}.bcc2{background-color:#dcae1d}.bcc2-light{background-color:#ff4874}.bcc-g{background-color:gray}.bcc-w{background-color:#fff}.bcc-b{background-color:#212529}.brc1{border-color:#4859b4}.brc1-light{border-color:#05a5ff}.brc2{border-color:#dcae1d}.brc2-light{border-color:#ff4874}.brc-g{border-color:gray}.brc-w{border-color:#fff}.brc-b{border-color:#212529}.pd0{padding:0}.gap0{gap:0;--gap: 0}.mrh0{margin:0 0}.mrv0{margin:0 0}.mrb0{margin:0 0 0}.pd16{padding:16px}.gap16{gap:16px;--gap: 16px}.mrh16{margin:0 16px}.mrv16{margin:16px 0}.mrb16{margin:0 0 16px}.pd32{padding:32px}.gap32{gap:32px;--gap: 32px}.mrh32{margin:0 32px}.mrv32{margin:32px 0}.mrb32{margin:0 0 32px}.gap{gap:var(--gap)}.mrt0{margin-top:0}.mrb0{margin-bottom:0}.pa{position:absolute}.pr{position:relative}.df{display:flex;flex-wrap:wrap}.dfc{display:flex;flex-direction:column;align-items:stretch}.dfcc{display:flex;flex-direction:column;align-items:center}.ais{align-items:stretch}.aic{align-items:center}.a1{place-content:start}.a2{place-content:start center;text-align:center}.a3{place-content:start end}.a4{place-content:center start;align-items:center}.a5{place-content:center;align-items:center;text-align:center}.a6{place-content:center end;align-items:center;text-align:end}.a7{place-content:end start;align-items:end}.a8{place-content:end center;align-items:end;text-align:center}.a9{place-content:end;align-items:end;text-align:end}.adh{place-content:center space-between;align-items:center}.aa1{top:0;left:0}.aa2{top:0;left:50%;transform:translateX(-50%)}.aa3{top:0;right:0}.aa4{top:50%;left:0;transform:translateY(-50%)}.aa5{top:50%;left:50%;transform:translate(-50%, -50%)}.aa6{top:50%;right:0;transform:translateY(-50%)}.aa7{bottom:0;left:0}.aa8{bottom:0;left:50%;transform:translateX(-50%)}.aa9{bottom:0;right:0}.w100,wf{width:100%}.f1{flex:1}.f1all>*{flex:1}.hdn{display:none}body{color:#333;padding:16px;overflow-x:hidden}@media(min-width: 1200px){body{padding:0}}a{color:#4859b4;text-decoration:none}input:disabled{color:#ccc}button{color:#333;background-color:#f4f4f4;outline:none}button:disabled{color:#999}button:not(:disabled):active{background-color:#ddd}button:focus{border-color:#666}*[hint]{position:relative}*[hint]:before,*[hint]:after{content:" ";top:-2px;left:50%;border:5px solid rgba(0,0,0,0);border-top-color:#444;position:absolute;visibility:hidden;opacity:0;z-index:2;transform:translate(-50%, 100%)}*[hint]:after{border:none;top:-12px;background-color:#444;color:#fff;text-align:center;border-radius:6px;padding:12px 18px;font-size:18px;line-height:20px;content:attr(hint);display:inline-block}*[hint]:hover:after,*[hint]:hover:before{animation:d1s 1s ease;visibility:visible;transform:translate(-50%, -100%);opacity:.9}@keyframes d1s{0%{opacity:0}75%{opacity:0;transform:translate(-50%, 0)}100%{transform:translate(-50%, -100%);opacity:.9}}i{font-style:normal}.gap>p{margin:0;width:100%}:root{--gap: 16px}.cont,.cont-fluid{width:100%;margin:0 auto}section.cont,section.cont-fluid{margin-bottom:16px}@media(min-width: 1200px){.cont{max-width:1130px}}.grid{grid-column-gap:var(--gap);grid-row-gap:var(--gap);display:grid;grid-template-columns:1fr}@media(min-width: 1200px){.grid{grid-template-columns:repeat(auto-fit, minmax(0%, 1fr))}.gcs2{grid-template-columns:repeat(2, minmax(0%, 1fr))}.gcs3{grid-template-columns:repeat(3, minmax(0%, 1fr))}.gcs4{grid-template-columns:repeat(4, minmax(0%, 1fr))}.gcs5{grid-template-columns:repeat(5, minmax(0%, 1fr))}.gcs6{grid-template-columns:repeat(6, minmax(0%, 1fr))}.gcs12{grid-template-columns:repeat(12, minmax(0%, 1fr))}.gc2{grid-column:span 2}.gc3{grid-column:span 3}.gc4{grid-column:span 4}.gc5{grid-column:span 5}.gc6{grid-column:span 6}}[aria-busy=true]{cursor:progress}[aria-busy=true]:not(input,select,textarea,body)::before{display:inline-block;width:1em;height:1em;border:.1875em solid currentColor;border-radius:1em;border-right-color:rgba(0,0,0,0);content:"";vertical-align:text-bottom;vertical-align:-0.125em;animation:spinner .75s linear infinite;opacity:.5}[aria-busy=true]:not(input,select,textarea,body):not(:empty)::before{margin-right:calc(var(--gap)*.5);margin-left:0;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:calc(var(--gap)*.5);margin-inline-end:calc(var(--gap)*.5)}[aria-busy=true]:not(input,select,textarea):empty{text-align:center}label[aria-busy=true]::before{position:absolute;bottom:10px;right:0;color:#666}[aria-busy=true]:is(a,button,input),label[aria-busy=true]>:is(input,select){pointer-events:none}@keyframes spinner{to{transform:rotate(360deg)}}body[aria-busy=true] :is(a,input,button,select){cursor:progress;pointer-events:none}button,input,select,textarea{border:1px solid gray;border-radius:2px;padding:8px;transition:all .3s}input:not([type=checkbox],[type=radio],[type=range],[type=file]),select,textarea{appearance:none;width:100%}:is(button,input,select):hover{border-color:#4859b4}:is(select,input):focus-visible{outline:none}:is(button,input,select):focus{box-shadow:0 0 0 2px #7d8acb}.hov{opacity:.7;cursor:pointer;transition:opacity .3s}.hov:hover{opacity:1}.ivs1{bottom:9px;right:9px;color:#888}/*# sourceMappingURL=styles.css.map */
 .err.s1ml1vnr{box-shadow:0 0 0 2px #f1839a}
label.s1f8samc{flex:1 0;margin-right:8px}input.s1f8samc{margin-top:3px}.tfs3.s1f8samc{flex:0 0 110px}
input[type=checkbox].s13yjyld{height:0;width:0;visibility:hidden}label.s13yjyld{cursor:pointer;text-indent:-9999px;width:41px;height:23px;background:grey;display:block;border-radius:23px;position:relative}label.s13yjyld:after{content:'';position:absolute;top:2px;left:2px;width:19px;height:19px;background:#fff;border-radius:19px;transition:0.23s}label.cactive.s13yjyld{background:#bada55}label.cactive.s13yjyld:after{left:calc(100% - 2px);transform:translateX(-100%)}label.s13yjyld:active:after{width:25px}
.errorbox.sk5w7gv{height:20px;font-size:11px;overflow:hidden}.sw.sk5w7gv{top:4px;font-size:18px;display:flex;flex-direction:row-reverse;gap:8px;margin-left:8px}.alert.sk5w7gv{box-shadow:red 0px 0px 4px 3px}.gray.sk5w7gv{color:#bbb;background:#e7e7e7}
.st.s15dnja0{transform-origin:50%;transform:rotate(90deg);stroke-dasharray:566;transition:stroke-dashoffset .5s, stroke .5s}
#chart.s1ar9lqg{height:100%}
.al_title.s1yxfeoi i.s1yxfeoi{padding:8px}.remove_btn.s1yxfeoi.s1yxfeoi{opacity:1;background:#951246}
.kolo.shp1dj2>div.shp1dj2{align-items:flex-start;width:calc(100% - 60px)}.red.shp1dj2.shp1dj2{color:rgb(255, 60, 15)}.chart.shp1dj2.shp1dj2{height:740px}.ranges.shp1dj2.shp1dj2{align-content:flex-start}.green1.shp1dj2.shp1dj2{color:#3f6b33;font-weight:500}.green1.shp1dj2>span.shp1dj2{font-size:11px;margin-bottom:-20px;color:gray}.info1.shp1dj2 h2.shp1dj2{margin:0;font-weight:400}.info1.shp1dj2 .bignum1.shp1dj2{margin:0 0 8px;color:#000}.info1.shp1dj2.shp1dj2{gap:32px}.info1.shp1dj2>.dfcc.shp1dj2{gap:24px}.btns1.shp1dj2.shp1dj2{margin:40px 0 16px;gap:32px}.btns1.shp1dj2>.shp1dj2{width:250px;flex:1}.card1.shp1dj2.shp1dj2{padding:16px;box-shadow:0 0 1.75em rgb(0 0 0 / 10%)}.card2.shp1dj2.shp1dj2{padding:16px;background:#eceef7}.card3.shp1dj2.shp1dj2{padding:48px 16px 32px;background:#ebf0ea}.rez-sel.shp1dj2.shp1dj2{cursor:pointer;color:#fffa;transition:0.3s}.rez-sel.shp1dj2.shp1dj2:hover{color:#fff}.rez-sel.act.shp1dj2.shp1dj2{color:#dcae1d}
</style></head>
<body>
<script>
var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function a(){return Object.create(null)}function s(t){t.forEach(n)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e,n,a){if(t){const s=i(t,e,n,a);return t[0](s)}}function i(t,n,a,s){return t[1]&&s?e(a.ctx.slice(),t[1](s(n))):a.ctx}function c(t,e,n,a){if(t[2]&&a){const s=t[2](a(n));if(void 0===e.dirty)return s;if("object"==typeof s){const t=[],n=Math.max(e.dirty.length,s.length);for(let a=0;a<n;a+=1)t[a]=e.dirty[a]|s[a];return t}return e.dirty|s}return e.dirty}function u(t,e,n,a,s,o){if(s){const r=i(e,n,a,o);t.p(r,s)}}function d(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function p(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function f(t,e){const n={};e=new Set(e);for(const a in t)e.has(a)||"$"===a[0]||(n[a]=t[a]);return n}function $(t,e){t.appendChild(e)}function m(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode&&t.parentNode.removeChild(t)}function g(t){return document.createElement(t)}function v(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function y(t){return document.createTextNode(t)}function _(){return y(" ")}function x(t,e,n,a){return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function b(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function w(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const a in e)null==e[a]?t.removeAttribute(a):"style"===a?t.style.cssText=e[a]:"__value"===a?t.value=t[a]=e[a]:n[a]&&n[a].set?t[a]=e[a]:b(t,a,e[a])}function D(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function R(t,e){t.value=null==e?"":e}function k(t,e,n,a){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,a?"important":"")}function N(t,e,n){for(let n=0;n<t.options.length;n+=1){const a=t.options[n];if(a.__value===e)return void(a.selected=!0)}n&&void 0===e||(t.selectedIndex=-1)}function j(t,e,n){t.classList[n?"add":"remove"](e)}let S;function C(t){S=t}function P(t){(function(){if(!S)throw new Error("Function called outside component initialization");return S})().$$.on_mount.push(t)}function T(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const z=[],q=[];let O=[];const M=[],I=Promise.resolve();let A=!1;function E(t){O.push(t)}function B(t){M.push(t)}const J=new Set;let F=0;function L(){if(0!==F)return;const t=S;do{try{for(;F<z.length;){const t=z[F];F++,C(t),V(t.$$)}}catch(t){throw z.length=0,F=0,t}for(C(null),z.length=0,F=0;q.length;)q.pop()();for(let t=0;t<O.length;t+=1){const e=O[t];J.has(e)||(J.add(e),e())}O.length=0}while(z.length);for(;M.length;)M.pop()();A=!1,J.clear(),C(t)}function V(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const H=new Set;let Z;function K(){Z={r:0,c:[],p:Z}}function W(){Z.r||s(Z.c),Z=Z.p}function G(t,e){t&&t.i&&(H.delete(t),t.i(e))}function Q(t,e,n,a){if(t&&t.o){if(H.has(t))return;H.add(t),Z.c.push((()=>{H.delete(t),a&&(n&&t.d(1),a())})),t.o(e)}else a&&a()}function U(t,e){const n={},a={},s={$$scope:1};let o=t.length;for(;o--;){const r=t[o],l=e[o];if(l){for(const t in r)t in l||(a[t]=1);for(const t in l)s[t]||(n[t]=l[t],s[t]=1);t[o]=l}else for(const t in r)s[t]=1}for(const t in a)t in n||(n[t]=void 0);return n}function X(t,e,n){const a=t.$$.props[e];void 0!==a&&(t.$$.bound[a]=n,n(t.$$.ctx[a]))}function Y(t){t&&t.c()}function tt(t,e,a,r){const{fragment:l,after_update:i}=t.$$;l&&l.m(e,a),r||E((()=>{const e=t.$$.on_mount.map(n).filter(o);t.$$.on_destroy?t.$$.on_destroy.push(...e):s(e),t.$$.on_mount=[]})),i.forEach(E)}function et(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];O.forEach((a=>-1===t.indexOf(a)?e.push(a):n.push(a))),n.forEach((t=>t())),O=e}(n.after_update),s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nt(t,e){-1===t.$$.dirty[0]&&(z.push(t),A||(A=!0,I.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function at(e,n,o,r,l,i,c,u=[-1]){const d=S;C(e);const p=e.$$={fragment:null,ctx:[],props:i,update:t,not_equal:l,bound:a(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:a(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(p.root);let f=!1;if(p.ctx=o?o(e,n.props||{},((t,n,...a)=>{const s=a.length?a[0]:n;return p.ctx&&l(p.ctx[t],p.ctx[t]=s)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](s),f&&nt(e,t)),n})):[],p.update(),f=!0,s(p.before_update),p.fragment=!!r&&r(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(h)}else p.fragment&&p.fragment.c();n.intro&&G(e.$$.fragment),tt(e,n.target,n.anchor,n.customElement),L()}C(d)}class st{$destroy(){et(this,1),this.$destroy=t}$on(e,n){if(!o(n))return t;const a=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return a.push(n),()=>{const t=a.indexOf(n);-1!==t&&a.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ot(t,e,n){return isNaN(t)&&(t=e),Math.max(Math.min(t,n),e)}function rt(t,e,n=2){let a=t;t=Math.abs(t);return`${a.toLocaleString(void 0,{maximumFractionDigits:n})} ${e[(t=Math.floor(t))%100>4&&t%100<20?2:[2,0,1,1,1,2][t%10<5?t%10:5]]}`}const lt=Intl.NumberFormat("ru",{notation:"compact",maximumFractionDigits:3}).format,it=Intl.NumberFormat("ru",{notation:"compact",maximumFractionDigits:2}).format,ct=Intl.NumberFormat("ru",{maximumSignificantDigits:16}).format;function ut(t){return rt(t,["день","дня","дней"])}var dt="https://trademeter.4848.site/api/";async function pt(t,e={}){"do"in t&&(e=t,t=dt);const n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)});return await n.json()}function ft(t,e=300){let n;return(...a)=>{clearTimeout(n),n=setTimeout((()=>{t.apply(this,a)}),e)}}function $t(t){let n,a,o,r,i,p,f,v,R,k,N;const S=t[13].default,C=l(S,t,t[12],null);let P=[t[7],{value:t[3]}],T={};for(let t=0;t<P.length;t+=1)T=e(T,P[t]);return{c(){n=g("label"),a=g("div"),C&&C.c(),o=_(),r=g("input"),i=_(),p=g("div"),f=y(t[0]),w(r,T),j(r,"err",t[4]),j(r,"s1ml1vnr",!0),b(p,"class","pa ivs1"),b(n,"class",v="pr dfc gap "+t[1]+" s1ml1vnr")},m(e,s){m(e,n,s),$(n,a),C&&C.m(a,null),$(n,o),$(n,r),"value"in T&&(r.value=T.value),r.autofocus&&r.focus(),t[14](r),$(n,i),$(n,p),$(p,f),R=!0,k||(N=[x(r,"input",t[5]),x(r,"blur",t[6])],k=!0)},p(t,[e]){C&&C.p&&(!R||4096&e)&&u(C,S,t,t[12],R?c(S,t[12],e,null):d(t[12]),null),w(r,T=U(P,[128&e&&t[7],(!R||8&e&&r.value!==t[3])&&{value:t[3]}])),"value"in T&&(r.value=T.value),j(r,"err",t[4]),j(r,"s1ml1vnr",!0),(!R||1&e)&&D(f,t[0]),(!R||2&e&&v!==(v="pr dfc gap "+t[1]+" s1ml1vnr"))&&b(n,"class",v)},i(t){R||(G(C,t),R=!0)},o(t){Q(C,t),R=!1},d(e){e&&h(n),C&&C.d(e),t[14](null),k=!1,s(N)}}}function mt(t,n,a){const s=["value","suffix","mode","max","min","class"];let o,r=f(n,s),{$$slots:l={},$$scope:i}=n,{value:c=0,suffix:u="",mode:d="",max:$,min:m}=n,{class:h=""}=n;isNaN($)&&($=void 0),isNaN(m)&&(m=void 0);let g,v,y=c,_=g=b(c);const x=t=>{t!=y&&(v=!0,a(8,c=t),y=c)};function b(t){return"int"===d?isNaN(t)?t:t.toLocaleString(void 0,{maximumFractionDigits:0}):"%"===d?isNaN(t)?t:(100*t).toLocaleString(void 0,{maximumFractionDigits:14}):t}function w(t){let e;if("int"===d)e=parseInt(t?.replace(/[^0-9]/g,""));else{if("%"!==d)return t;e=parseFloat(t.replace(/[^0-9,.]/g,"").replace(",","."))/100}return Number.isNaN(e)?null:e}function D(){console.log("normalize");let t=w(o.value);a(8,c=null===t?m:t),"int"!==d&&"%"!==d||x(ot(c,m,$)),a(3,g=b(c)),a(4,R=!1)}let R;return t.$$set=t=>{n=e(e({},n),p(t)),a(7,r=f(n,s)),"value"in t&&a(8,c=t.value),"suffix"in t&&a(0,u=t.suffix),"mode"in t&&a(11,d=t.mode),"max"in t&&a(9,$=t.max),"min"in t&&a(10,m=t.min),"class"in t&&a(1,h=t.class),"$$scope"in t&&a(12,i=t.$$scope)},t.$$.update=()=>{1540&t.$$.dirty&&o&&D(),256&t.$$.dirty&&(v||a(3,g=b(c)),v=!1,y=c)},[u,h,o,g,R,function(t){let e;const n=t.target.value;var s;/^[0-9\s.,]+$/.test(s=n)||""==s?(_=n,e=w(n),null!==e&&e<=$&&e>=m?(
//!!!!!!!
x(e),a(4,R=!1)):a(4,R=!0)):t.target.value=_},D,r,c,$,m,d,i,l,function(t){q[t?"unshift":"push"]((()=>{o=t,a(2,o)}))}]}class ht extends st{constructor(t){super(),at(this,t,mt,$t,r,{value:8,suffix:0,mode:11,max:9,min:10,class:1})}}function gt(e){let n,a,o,r,l,i,c,u,d,p,f;return{c(){n=g("div"),a=g("label"),o=y(e[4]),r=_(),l=g("input"),i=_(),c=g("div"),u=y(e[0]),d=y(e[5]),b(l,"type","range"),b(l,"min",e[1]),b(l,"max",e[2]),b(l,"step",e[3]),b(l,"class","s1f8samc"),b(a,"class","s1f8samc"),b(c,"class","tfs3 s1f8samc"),b(n,"class","df w100")},m(t,s){m(t,n,s),$(n,a),$(a,o),$(a,r),$(a,l),R(l,e[0]),$(n,i),$(n,c),$(c,u),$(c,d),p||(f=[x(l,"change",e[6]),x(l,"input",e[6])],p=!0)},p(t,[e]){16&e&&D(o,t[4]),2&e&&b(l,"min",t[1]),4&e&&b(l,"max",t[2]),8&e&&b(l,"step",t[3]),1&e&&R(l,t[0]),1&e&&D(u,t[0]),32&e&&D(d,t[5])},i:t,o:t,d(t){t&&h(n),p=!1,s(f)}}}function vt(t,e,n){let{min:a=0,max:s=100,step:o=1,label:r="",value:l=50,postfix:i=""}=e;return t.$$set=t=>{"min"in t&&n(1,a=t.min),"max"in t&&n(2,s=t.max),"step"in t&&n(3,o=t.step),"label"in t&&n(4,r=t.label),"value"in t&&n(0,l=t.value),"postfix"in t&&n(5,i=t.postfix)},[l,a,s,o,r,i,function(){l=function(t){return""===t?null:+t}(this.value),n(0,l)}]}class yt extends st{constructor(t){super(),at(this,t,vt,gt,r,{min:1,max:2,step:3,label:4,value:0,postfix:5})}}let _t=[{name:"Сбербанк России ПАО ао",code:"SBER",currentPrice:217.78,kurs:1,shagZeny:.01,zenaShaga:.1,adrDay:3.51}];function xt(t){let n,a,s,o,r,i,p;const f=t[3].default,v=l(f,t,t[2],null);let y=[{class:"df gap"},t[1]],D={};for(let t=0;t<y.length;t+=1)D=e(D,y[t]);return{c(){n=g("div"),a=g("label"),s=g("input"),o=_(),v&&v.c(),b(s,"type","checkbox"),b(s,"class","s13yjyld"),b(a,"class","s13yjyld"),j(a,"cactive",t[0]),w(n,D)},m(e,l){m(e,n,l),$(n,a),$(a,s),s.checked=t[0],$(n,o),v&&v.m(n,null),r=!0,i||(p=x(s,"change",t[4]),i=!0)},p(t,[e]){1&e&&(s.checked=t[0]),(!r||1&e)&&j(a,"cactive",t[0]),v&&v.p&&(!r||4&e)&&u(v,f,t,t[2],r?c(f,t[2],e,null):d(t[2]),null),w(n,D=U(y,[{class:"df gap"},2&e&&t[1]]))},i(t){r||(G(v,t),r=!0)},o(t){Q(v,t),r=!1},d(t){t&&h(n),v&&v.d(t),i=!1,p()}}}function bt(t,n,a){const s=["val"];let o=f(n,s),{$$slots:r={},$$scope:l}=n,{val:i}=n;return t.$$set=t=>{n=e(e({},n),p(t)),a(1,o=f(n,s)),"val"in t&&a(0,i=t.val),"$$scope"in t&&a(2,l=t.$$scope)},[i,o,l,r,function(){i=this.checked,a(0,i)}]}class wt extends st{constructor(t){super(),at(this,t,bt,xt,r,{val:0})}}function Dt(t){let e,n,a,o,r,l,i,c,u,d,p,f,v,w,N,S,C,P,T,z,O,M,I,A,E,J,F,L,V,H,Z,K,W,U,nt,at,st,ot,rt,lt,it,ct,ut,dt,pt,ft,$t,mt,ht,gt=(t[11]||"")+"",vt=(t[12]||"")+"";function yt(e){t[17](e)}let _t={};function xt(e){t[18](e)}void 0!==t[3]&&(_t.val=t[3]),l=new wt({props:_t}),q.push((()=>X(l,"val",yt)));let bt={};function Dt(e){t[19](e)}void 0!==t[7]&&(bt.val=t[7]),p=new wt({props:bt}),q.push((()=>X(p,"val",xt)));let Rt={};function kt(e){t[21](e)}void 0!==t[5]&&(Rt.val=t[5]),S=new wt({props:Rt}),q.push((()=>X(S,"val",Dt)));let Nt={};function jt(e){t[22](e)}void 0!==t[4]&&(Nt.val=t[4]),J=new wt({props:Nt}),q.push((()=>X(J,"val",kt)));let St={};function Ct(e){t[23](e)}void 0!==t[6]&&(St.val=t[6]),Z=new wt({props:St}),q.push((()=>X(Z,"val",jt)));let Pt={};return void 0!==t[10]&&(Pt.val=t[10]),at=new wt({props:Pt}),q.push((()=>X(at,"val",Ct))),{c(){e=g("div"),n=g("div"),a=g("div"),o=y("История\r\n        "),r=g("span"),Y(l.$$.fragment),c=y("исп"),u=_(),d=g("span"),Y(p.$$.fragment),v=y("hc"),w=_(),N=g("span"),Y(S.$$.fragment),P=y("+1"),T=_(),z=g("textarea"),O=_(),M=g("div"),I=g("div"),A=y("Облигации\r\n            "),E=g("span"),Y(J.$$.fragment),L=y("исп"),V=_(),H=g("span"),Y(Z.$$.fragment),W=y("hc"),U=_(),nt=g("span"),Y(at.$$.fragment),ot=y("+1"),rt=_(),lt=g("textarea"),it=_(),ct=g("div"),ut=y(gt),dt=_(),pt=g("div"),ft=y(vt),k(r,"margin-left","auto"),b(r,"class","pr sw sk5w7gv"),b(d,"class","pr sw sk5w7gv"),b(N,"class","pr sw sk5w7gv"),b(a,"class","tfs3 mrv16 mrt0 df a4 gap"),b(z,"rows","10"),b(z,"class","w100 sk5w7gv"),j(z,"alert",t[8]),j(z,"gray",!t[3]),k(E,"margin-left","auto"),b(E,"class","pr sw sk5w7gv"),b(H,"class","pr sw sk5w7gv"),b(nt,"class","pr sw sk5w7gv"),b(I,"class","tfs3 mrv16 mrt0 df a4 gap"),b(lt,"rows","10"),b(lt,"class","w100 sk5w7gv"),j(lt,"alert",t[9]),j(lt,"gray",!t[4]),b(ct,"class","errorbox sk5w7gv"),b(pt,"class","errorbox sk5w7gv"),b(e,"class","grid gcs2")},m(s,i){m(s,e,i),$(e,n),$(n,a),$(a,o),$(a,r),tt(l,r,null),$(r,c),$(a,u),$(a,d),tt(p,d,null),$(d,v),$(a,w),$(a,N),tt(S,N,null),$(N,P),$(n,T),$(n,z),R(z,t[1]),$(e,O),$(e,M),$(M,I),$(I,A),$(I,E),tt(J,E,null),$(E,L),$(I,V),$(I,H),tt(Z,H,null),$(H,W),$(I,U),$(I,nt),tt(at,nt,null),$(nt,ot),$(M,rt),$(M,lt),R(lt,t[2]),$(e,it),$(e,ct),$(ct,ut),$(e,dt),$(e,pt),$(pt,ft),$t=!0,mt||(ht=[x(z,"input",t[20]),x(lt,"input",t[24]),x(pt,"click",t[0])],mt=!0)},p(t,e){const n={};!i&&8&e[0]&&(i=!0,n.val=t[3],B((()=>i=!1))),l.$set(n);const a={};!f&&128&e[0]&&(f=!0,a.val=t[7],B((()=>f=!1))),p.$set(a);const s={};!C&&32&e[0]&&(C=!0,s.val=t[5],B((()=>C=!1))),S.$set(s),2&e[0]&&R(z,t[1]),(!$t||256&e[0])&&j(z,"alert",t[8]),(!$t||8&e[0])&&j(z,"gray",!t[3]);const o={};!F&&16&e[0]&&(F=!0,o.val=t[4],B((()=>F=!1))),J.$set(o);const r={};!K&&64&e[0]&&(K=!0,r.val=t[6],B((()=>K=!1))),Z.$set(r);const c={};!st&&1024&e[0]&&(st=!0,c.val=t[10],B((()=>st=!1))),at.$set(c),4&e[0]&&R(lt,t[2]),(!$t||512&e[0])&&j(lt,"alert",t[9]),(!$t||16&e[0])&&j(lt,"gray",!t[4]),(!$t||2048&e[0])&&gt!==(gt=(t[11]||"")+"")&&D(ut,gt),(!$t||4096&e[0])&&vt!==(vt=(t[12]||"")+"")&&D(ft,vt)},i(t){$t||(G(l.$$.fragment,t),G(p.$$.fragment,t),G(S.$$.fragment,t),G(J.$$.fragment,t),G(Z.$$.fragment,t),G(at.$$.fragment,t),$t=!0)},o(t){Q(l.$$.fragment,t),Q(p.$$.fragment,t),Q(S.$$.fragment,t),Q(J.$$.fragment,t),Q(Z.$$.fragment,t),Q(at.$$.fragment,t),$t=!1},d(t){t&&h(e),et(l),et(p),et(S),et(J),et(Z),et(at),mt=!1,s(ht)}}}function Rt(t){return t.replace(/[\s\n\r\t]/gs,"").replace(/,([}\]])/gs,"$1").replace(/([,{\[]|)(?:("|'|)([\w_\- ]+)\2:|)("|'|)(.*?)\4([,}\]])/gs,((t,e,n,a,s,o,r)=>(o=o.replace(/"/gis,"").trim(),a&&(a='"'+a.replace(/"/gis,"").trim()+'"'),o.match(/^[0-9]+(\.[0-9]+|)$/)||["true","false"].includes(o)||(o='"'+o+'"'),a?e+a+":"+o+r:e+o+r)))}function kt(t,e,n){let a,s,o,{realData:r,bonds:l,flag:i,use:c}=e,u=!1,d=!1,p=JSON.stringify(r,null,4),f=JSON.stringify(l,null,4),$=!0,m=!1,h=!1,g=!1;const v=(t,e=1)=>Object.keys(t).reduce(((n,a)=>{if(isNaN(a))n[a]=t[a];else{n[parseInt(a)+e]=t[a]}return n}),{time:new Date});let y,_,x;return t.$$set=t=>{"realData"in t&&n(13,r=t.realData),"bonds"in t&&n(14,l=t.bonds),"flag"in t&&n(15,i=t.flag),"use"in t&&n(16,c=t.use)},t.$$.update=()=>{8&t.$$.dirty[0]&&n(16,c.realData=$,c),16&t.$$.dirty[0]&&n(16,c.bonds=m,c),130&t.$$.dirty[0]&&function(){try{if(n(8,u=!1),n(11,y=""),n(15,i=!i),!$)return void n(13,r=void 0);if(p){let t;t=x?Rt(p):p,a=JSON.parse(t),a.time=new Date;let e=1;for(let t of Object.keys(a))a[t].day=e,e++;n(13,r=a)}else n(13,r=void 0)}catch(t){n(8,u=!0),n(11,y=t)}}(),68&t.$$.dirty[0]&&function(){try{if(n(9,d=!1),n(12,_=""),!m)return void n(14,l=void 0);if(f){let t;t=o?Rt(f):f,s=JSON.parse(t),n(14,l=s)}else n(14,l=void 0)}catch(t){n(9,d=!0),n(12,_=t)}}(),32&t.$$.dirty[0]&&function(){try{a&&Object.keys(a).length>0&&n(1,p=h?JSON.stringify(v(a,1),null,4):JSON.stringify(v(a,-1),null,4))}catch(t){}}()},[()=>{setTimeout((()=>{n(1,p=JSON.stringify(r,null,4)),n(2,f=JSON.stringify(l,null,4))}),120)},p,f,$,m,h,o,x,u,d,g,y,_,r,l,i,c,function(t){$=t,n(3,$)},function(t){x=t,n(7,x)},function(t){h=t,n(5,h)},function(){p=this.value,n(1,p)},function(t){m=t,n(4,m)},function(t){o=t,n(6,o)},function(t){g=t,n(10,g)},function(){f=this.value,n(2,f)}]}class Nt extends st{constructor(t){super(),at(this,t,kt,Dt,r,{realData:13,bonds:14,flag:15,use:16,load:0},null,[-1,-1])}get load(){return this.$$.ctx[0]}}function jt(e){let n,a,s;return{c(){n=v("svg"),a=v("circle"),s=v("circle"),b(a,"cy","100"),b(a,"cx","100"),b(a,"r","90"),b(a,"fill","transparent"),b(a,"stroke","#ccc"),b(a,"stroke-width","18"),k(s,"stroke-dashoffset",e[1]),k(s,"color",e[0]),b(s,"class","st s15dnja0"),b(s,"cy","100"),b(s,"cx","100"),b(s,"r","90"),b(s,"fill","transparent"),b(s,"stroke","currentColor"),b(s,"stroke-width","20"),b(s,"stroke-dasharray","100, 500"),b(s,"stroke-dashoffset","0"),b(n,"viewBox","0 0 200 200")},m(t,e){m(t,n,e),$(n,a),$(n,s)},p(t,[e]){2&e&&k(s,"stroke-dashoffset",t[1]),1&e&&k(s,"color",t[0])},i:t,o:t,d(t){t&&h(n)}}}function St(t,e,n){let a,{val:s,hotColor:o}=e,r="currentColor";return t.$$set=t=>{"val"in t&&n(2,s=t.val),"hotColor"in t&&n(3,o=t.hotColor)},t.$$.update=()=>{4&t.$$.dirty&&n(1,a=566*(100-s||0)/100),12&t.$$.dirty&&o&&n(0,r=`hsl(${s} 90% 65%)`)},[r,a,s,o]}class Ct extends st{constructor(t){super(),at(this,t,St,jt,r,{val:2,hotColor:3})}}function Pt(t,e,n){const a=t.slice();return a[10]=e[n],a[12]=n,a}function Tt(t){let e,n,a,s=(!0===t[3]?"Не выбрано":t[3])+"";return{c(){e=g("option"),n=y(s),a=_(),e.__value=0,e.value=e.__value,e.disabled=!0,e.selected=!0},m(t,s){m(t,e,s),$(e,n),$(e,a)},p(t,e){8&e&&s!==(s=(!0===t[3]?"Не выбрано":t[3])+"")&&D(n,s)},d(t){t&&h(e)}}}function zt(t){let e,n,a,s,o=t[10][t[2][1]]+"";return{c(){e=g("option"),n=y(o),a=_(),e.__value=s=t[10][t[2][0]],e.value=e.__value},m(t,s){m(t,e,s),$(e,n),$(e,a)},p(t,a){6&a&&o!==(o=t[10][t[2][1]]+"")&&D(n,o),6&a&&s!==(s=t[10][t[2][0]])&&(e.__value=s,e.value=e.__value)},d(t){t&&h(e)}}}function qt(t){let n,a,o,r,i,p,f;const v=t[7].default,D=l(v,t,t[6],null);let R=t[3]&&Tt(t),k=t[1],j=[];for(let e=0;e<k.length;e+=1)j[e]=zt(Pt(t,k,e));let S=[{class:"dfc gap"},t[5],{"aria-busy":t[4]}],C={};for(let t=0;t<S.length;t+=1)C=e(C,S[t]);return{c(){n=g("label"),D&&D.c(),a=_(),o=g("select"),R&&R.c(),r=y("");for(let t=0;t<j.length;t+=1)j[t].c();b(o,"placeholder","Не выбрано"),void 0===t[0]&&E((()=>t[9].call(o))),w(n,C)},m(e,s){m(e,n,s),D&&D.m(n,null),$(n,a),$(n,o),R&&R.m(o,null),$(o,r);for(let t=0;t<j.length;t+=1)j[t]&&j[t].m(o,null);N(o,t[0],!0),i=!0,p||(f=[x(o,"change",t[9]),x(o,"change",t[8])],p=!0)},p(t,[e]){if(D&&D.p&&(!i||64&e)&&u(D,v,t,t[6],i?c(v,t[6],e,null):d(t[6]),null),t[3]?R?R.p(t,e):(R=Tt(t),R.c(),R.m(o,r)):R&&(R.d(1),R=null),6&e){let n;for(k=t[1],n=0;n<k.length;n+=1){const a=Pt(t,k,n);j[n]?j[n].p(a,e):(j[n]=zt(a),j[n].c(),j[n].m(o,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=k.length}7&e&&N(o,t[0]),w(n,C=U(S,[{class:"dfc gap"},32&e&&t[5],(!i||16&e)&&{"aria-busy":t[4]}]))},i(t){i||(G(D,t),i=!0)},o(t){Q(D,t),i=!1},d(t){t&&h(n),D&&D.d(t),R&&R.d(),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(j,t),p=!1,s(f)}}}function Ot(t,n,a){const s=["items","val","flds","zero","aria_busy"];let o=f(n,s),{$$slots:r={},$$scope:l}=n,{items:i,val:c,flds:u=["id","name"],zero:d,aria_busy:$=!1}=n;return t.$$set=t=>{n=e(e({},n),p(t)),a(5,o=f(n,s)),"items"in t&&a(1,i=t.items),"val"in t&&a(0,c=t.val),"flds"in t&&a(2,u=t.flds),"zero"in t&&a(3,d=t.zero),"aria_busy"in t&&a(4,$=t.aria_busy),"$$scope"in t&&a(6,l=t.$$scope)},[c,i,u,d,$,o,l,r,function(e){T.call(this,t,e)},function(){c=function(t){const e=t.querySelector(":checked");return e&&e.__value}(this),a(0,c),a(1,i),a(2,u)}]}class Mt extends st{constructor(t){super(),at(this,t,Ot,qt,r,{items:1,val:0,flds:2,zero:3,aria_busy:4})}}function It(t){let e;return{c(){e=y("Показать")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function At(t){let e;return{c(){e=y("Заморозить")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function Et(t){let e;return{c(){e=y("Учитывать % из РД")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function Bt(t){let e;return{c(){e=y("Учитывать ввод/вывод из РД")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function Jt(t){let e;return{c(){e=y("Учитывать бонды")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function Ft(t){let e,n,a,s,o,r,i,p,f,v,y,x,w,D,R,k,N,j;const S=t[1].default,C=l(S,t,t[7],null);function P(e){t[2](e)}let T={$$slots:{default:[It]},$$scope:{ctx:t}};function z(e){t[3](e)}void 0!==t[0].show&&(T.val=t[0].show),s=new wt({props:T}),q.push((()=>X(s,"val",P)));let O={$$slots:{default:[At]},$$scope:{ctx:t}};function M(e){t[4](e)}void 0!==t[0].freeze&&(O.val=t[0].freeze),i=new wt({props:O}),q.push((()=>X(i,"val",z)));let I={$$slots:{default:[Et]},$$scope:{ctx:t}};function A(e){t[5](e)}void 0!==t[0].RD_scale&&(I.val=t[0].RD_scale),v=new wt({props:I}),q.push((()=>X(v,"val",M)));let E={$$slots:{default:[Bt]},$$scope:{ctx:t}};function J(e){t[6](e)}void 0!==t[0].RD_pays&&(E.val=t[0].RD_pays),w=new wt({props:E}),q.push((()=>X(w,"val",A)));let F={$$slots:{default:[Jt]},$$scope:{ctx:t}};return void 0!==t[0].bonds&&(F.val=t[0].bonds),k=new wt({props:F}),q.push((()=>X(k,"val",J))),{c(){e=g("div"),n=g("div"),C&&C.c(),a=_(),Y(s.$$.fragment),r=_(),Y(i.$$.fragment),f=_(),Y(v.$$.fragment),x=_(),Y(w.$$.fragment),R=_(),Y(k.$$.fragment),b(n,"class","tfs2"),b(e,"class","dfc gap card1")},m(t,o){m(t,e,o),$(e,n),C&&C.m(n,null),$(e,a),tt(s,e,null),$(e,r),tt(i,e,null),$(e,f),tt(v,e,null),$(e,x),tt(w,e,null),$(e,R),tt(k,e,null),j=!0},p(t,[e]){C&&C.p&&(!j||128&e)&&u(C,S,t,t[7],j?c(S,t[7],e,null):d(t[7]),null);const n={};128&e&&(n.$$scope={dirty:e,ctx:t}),!o&&1&e&&(o=!0,n.val=t[0].show,B((()=>o=!1))),s.$set(n);const a={};128&e&&(a.$$scope={dirty:e,ctx:t}),!p&&1&e&&(p=!0,a.val=t[0].freeze,B((()=>p=!1))),i.$set(a);const r={};128&e&&(r.$$scope={dirty:e,ctx:t}),!y&&1&e&&(y=!0,r.val=t[0].RD_scale,B((()=>y=!1))),v.$set(r);const l={};128&e&&(l.$$scope={dirty:e,ctx:t}),!D&&1&e&&(D=!0,l.val=t[0].RD_pays,B((()=>D=!1))),w.$set(l);const f={};128&e&&(f.$$scope={dirty:e,ctx:t}),!N&&1&e&&(N=!0,f.val=t[0].bonds,B((()=>N=!1))),k.$set(f)},i(t){j||(G(C,t),G(s.$$.fragment,t),G(i.$$.fragment,t),G(v.$$.fragment,t),G(w.$$.fragment,t),G(k.$$.fragment,t),j=!0)},o(t){Q(C,t),Q(s.$$.fragment,t),Q(i.$$.fragment,t),Q(v.$$.fragment,t),Q(w.$$.fragment,t),Q(k.$$.fragment,t),j=!1},d(t){t&&h(e),C&&C.d(t),et(s),et(i),et(v),et(w),et(k)}}}function Lt(t,e,n){let{$$slots:a={},$$scope:s}=e,{graph:o}=e;return t.$$set=t=>{"graph"in t&&n(0,o=t.graph),"$$scope"in t&&n(7,s=t.$$scope)},[o,a,function(e){t.$$.not_equal(o.show,e)&&(o.show=e,n(0,o))},function(e){t.$$.not_equal(o.freeze,e)&&(o.freeze=e,n(0,o))},function(e){t.$$.not_equal(o.RD_scale,e)&&(o.RD_scale=e,n(0,o))},function(e){t.$$.not_equal(o.RD_pays,e)&&(o.RD_pays=e,n(0,o))},function(e){t.$$.not_equal(o.bonds,e)&&(o.bonds=e,n(0,o))},s]}class Vt extends st{constructor(t){super(),at(this,t,Lt,Ft,r,{graph:0})}}const Ht={cash:0,bondsTotal:0,get total(){return this.cash+this.bondsTotal},init(t,e){this.opts=t,this.cash=e,this.bondsTotal=0,this.uB(e)},uB(t){if(isNaN(t))return t;var e=t-this.total;if(this.cash+=this.bondsTotal*(1+this.opts.couponRate)+e,this.cash<0)this.cash=0,this.bondsTotal=0;else if(this.cash>=this.opts.price){let t=this.cash%this.opts.price;this.bondsTotal=this.cash-t,this.cash=t}return isNaN(t)&&console.log(this.total),this.total}};function Zt(t,e,n,a,s,o,r,l,i=1,c=1,u=0,d=[],p={use:{RD_scale:!1,RD_pays:!1,bonds:!1,RD:!0},customRate:void 0,bond:void 0}){let f="object"==typeof d&&!Array.isArray(d)&&null!==d&&Object.keys(d).length>0;p.RD||(d={}),p.customRate;const $=p.RD&&p.use.RD_scale&&f,m=p.RD&&p.use.RD_pays&&f,h=p.use.bonds&&void 0!==p.bond;let g=e;void 0!==p.bond&&Ht.init(p.bond,e);let v=i,y=c,_=1,x=[];for(x=[e],t+=1,a*=1+(u||0),console.log(a);_<=l;){if(void 0!==d[_]?(console.log("RD"),g*=$?1+d[_].scale:t,v--,y--,m&&(g+=d[_].payload,g-=d[_].payment),y||(y=r),v||(v=s)):(g*=t,v--,y--,y||(y=r,g+=o),v||(v=s,g-=a)),_++,h&&void 0!==p.bond&&(g=Ht.uB(g)),g<0){g=0,x.push(g);break}x.push(g)}return x}function Kt(e){let n,a;return{c(){n=g("div"),a=g("canvas"),b(a,"id","chart"),b(a,"class","s1ar9lqg"),b(n,"class","pr"),k(n,"height","100%")},m(t,s){m(t,n,s),$(n,a),e[7](a)},p:t,i:t,o:t,d(t){t&&h(n),e[7](null)}}}function Wt(t,e,n){let a,{data1:s,data2:o,data3:r,stop:l=!1,graphs:i}=e;const c={borderWidth:4,pointRadius:0,pointHoverRadius:8,fill:!1,cubicInterpolationMode:"monotone"},u=ft((()=>{l?u():f?.data&&(f.data.labels=d,!i[1].freeze&&a[0]&&(f.data.datasets[0]=a[0]),!i[2].freeze&&a[1]&&(f.data.datasets[1]=a[1]),!i[3].freeze&&a[2]&&(f.data.datasets[2]=a[2]),f.setDatasetVisibility(0,i[1].show),f?.setDatasetVisibility(1,i[2].show),f?.setDatasetVisibility(2,i[3].show),f?.update())}),60);let d;const p=async t=>{let{CategoryScale:e,Chart:n,LineController:s,LineElement:o,LinearScale:r,PointElement:l,Tooltip:i}=await import("../../../../../../cj7u8.js");n.register(s,o,l,r,e,i),m=$.getContext("2d"),f=new n(m,{type:"line",data:{labels:d,datasets:a},options:{animation:{duration:300},interaction:{intersect:!1,mode:"index"},responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{title(t){let e=t[0].dataIndex,n=["Конец "+e+" дня.","Начало "+(e+1)+" дня"];return 0==e&&n.shift(),n}}}}}})};let f,$,m;return P((async()=>{setTimeout(p,100)})),t.$$set=t=>{"data1"in t&&n(1,s=t.data1),"data2"in t&&n(2,o=t.data2),"data3"in t&&n(3,r=t.data3),"stop"in t&&n(4,l=t.stop),"graphs"in t&&n(5,i=t.graphs)},t.$$.update=()=>{46&t.$$.dirty&&(a=function(t,e,n){const a=[];i[1].show&&Array.isArray(t)&&t.length>0?a.push({...c,label:" График 1",borderColor:"#1d66c4",data:t}):a.push({}),i[2].show&&Array.isArray(e)&&e.length>0?a.push({...c,label:" График 2",borderColor:"#338d76",data:e}):a.push({}),i[3].show&&Array.isArray(n)&&n.length>0?a.push({...c,label:" График 3",borderColor:"#d32047",data:n}):a.push({});let s=Math.max(t?.length||0,e?.length||0,n?.length||0);return d=Array(s+1).fill().map(((t,e)=>e+1)),u(),a}(s,o,r))},[$,s,o,r,l,i,u,function(t){q[t?"unshift":"push"]((()=>{$=t,n(0,$)}))}]}class Gt extends st{constructor(t){super(),at(this,t,Wt,Kt,r,{data1:1,data2:2,data3:3,stop:4,graphs:5,update:6})}get update(){return this.$$.ctx[6]}}function Qt(n){let a,s,o,r,l=[{hint:n[1]},n[2]],i={};for(let t=0;t<l.length;t+=1)i=e(i,l[t]);return{c(){a=g("i"),s=y(n[0]),w(a,i)},m(t,e){m(t,a,e),$(a,s),o||(r=x(a,"dblclick",n[4]),o=!0)},p(t,[e]){1&e&&D(s,t[0]),w(a,i=U(l,[2&e&&{hint:t[1]},4&e&&t[2]]))},i:t,o:t,d(t){t&&h(a),o=!1,r()}}}function Ut(t,n,a){const s=["n","p","t"];let o=f(n,s),{n:r,p:l,t:i}=n;return t.$$set=t=>{n=e(e({},n),p(t)),a(2,o=f(n,s)),"n"in t&&a(0,r=t.n),"p"in t&&a(3,l=t.p),"t"in t&&a(1,i=t.t)},t.$$.update=()=>{11&t.$$.dirty&&(isNaN(r)?isNaN(l)?a(1,i=a(0,r="")):(a(1,i=ct(l)),a(0,r=100*l),a(0,r=r>1e17?"∞":it(r)+"%")):(a(1,i=ct(r)),a(0,r=r>1e17?"∞":lt(r))))},[r,i,o,l,async t=>{(t.ctrlKey||t.metaKey)&&await navigator.clipboard.writeText(i)}]}class Xt extends st{constructor(t){super(),at(this,t,Ut,Qt,r,{n:0,p:3,t:1})}}function Yt(t){let e;return{c(){e=y("Начальный депозит")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function te(t){let e,n,a;function s(e){t[37](e)}let o={min:"0",max:Se,maxlength:"25",inputmode:"decimal",suffix:"%",mode:"%",$$slots:{default:[ne]},$$scope:{ctx:t}};return void 0!==t[1].customRate_&&(o.value=t[1].customRate_),e=new ht({props:o}),q.push((()=>X(e,"value",s))),{c(){Y(e.$$.fragment)},m(t,n){tt(e,t,n),a=!0},p(t,a){const s={};64&a[2]&&(s.$$scope={dirty:a,ctx:t}),!n&&2&a[0]&&(n=!0,s.value=t[1].customRate_,B((()=>n=!1))),e.$set(s)},i(t){a||(G(e.$$.fragment,t),a=!0)},o(t){Q(e.$$.fragment,t),a=!1},d(t){et(e,t)}}}function ee(t){let e,n,a;function s(e){t[36](e)}let o={min:t[0].present_||ke,max:Ne,maxlength:"25",inputmode:"decimal",mode:"int",$$slots:{default:[ae]},$$scope:{ctx:t}};return void 0!==t[0].future_&&(o.value=t[0].future_),e=new ht({props:o}),q.push((()=>X(e,"value",s))),{c(){Y(e.$$.fragment)},m(t,n){tt(e,t,n),a=!0},p(t,a){const s={};1&a[0]&&(s.min=t[0].present_||ke),64&a[2]&&(s.$$scope={dirty:a,ctx:t}),!n&&1&a[0]&&(n=!0,s.value=t[0].future_,B((()=>n=!1))),e.$set(s)},i(t){a||(G(e.$$.fragment,t),a=!0)},o(t){Q(e.$$.fragment,t),a=!1},d(t){et(e,t)}}}function ne(t){let e;return{c(){e=y("Доходность в день")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function ae(t){let e;return{c(){e=y("Целевой депозит")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function se(t){let e;return{c(){e=y("Дней")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function oe(t){let e;return{c(){e=y("Пассивный доход")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function re(t){let e;return{c(){e=y("Инструмент пассивного дохода")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function le(t){let e,n,a,s=Math.round(t[3].maxPayment||"-")+"";return{c(){e=y("Вывод\n            "),n=g("i"),a=y(s),b(n,"class","tc-g"),k(n,"font-size","12px")},m(t,s){m(t,e,s),m(t,n,s),$(n,a)},p(t,e){8&e[0]&&s!==(s=Math.round(t[3].maxPayment||"-")+"")&&D(a,s)},d(t){t&&h(e),t&&h(n)}}}function ie(t){let e;return{c(){e=y("Частота")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function ce(t){let e;return{c(){e=y("Пополнение")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function ue(t){let e;return{c(){e=y("Частота")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function de(t){let e,n,a,s,o,r,l=t[3]?.marginCall_+"";return{c(){e=g("div"),n=g("b"),n.textContent="МАРЖИН КОЛ",a=y(" НА "),s=g("b"),o=y(l),r=y(" ДЕНЬ"),b(e,"class","tfs2 "),k(e,"color","#ff3c0f")},m(t,l){m(t,e,l),$(e,n),$(e,a),$(e,s),$(s,o),$(e,r)},p(t,e){8&e[0]&&l!==(l=t[3]?.marginCall_+"")&&D(o,l)},d(t){t&&h(e)}}}function pe(t){let e;return{c(){e=g("div"),e.innerHTML="<b>ДЕПОЗИТ УМЕНЬШИЛСЯ!</b>",b(e,"class","tfs1 "),k(e,"color","#ff3c0f")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function fe(t){let e,n,a,s,o,r=ut(t[3].extraDays)+"";return{c(){e=g("p"),n=y("Нужно добавить "),a=g("b"),s=y(r),o=y(" чтобы прийти к цели")},m(t,r){m(t,e,r),$(e,n),$(e,a),$(a,s),$(e,o)},p(t,e){8&e[0]&&r!==(r=ut(t[3].extraDays)+"")&&D(s,r)},d(t){t&&h(e)}}}function $e(t){let e,n,a,s,o=ut(t[3].factDay)+"";return{c(){e=g("p"),n=y("Фактически к цели пришли за "),a=g("b"),s=y(o)},m(t,o){m(t,e,o),$(e,n),$(e,a),$(a,s)},p(t,e){8&e[0]&&o!==(o=ut(t[3].factDay)+"")&&D(s,o)},d(t){t&&h(e)}}}function me(t){let e,n,a,s,o,r=t[3].extraDays+"";return{c(){e=g("p"),n=y("Нужно добавить "),a=g("b"),s=y(r),o=y(" дней")},m(t,r){m(t,e,r),$(e,n),$(e,a),$(a,s),$(e,o)},p(t,e){8&e[0]&&r!==(r=t[3].extraDays+"")&&D(s,r)},d(t){t&&h(e)}}}function he(t){let e,n,a,s,o,r,l,i,c,u,d,p=ut(t[3].daysDiff)+"";return u=new Xt({props:{p:t[3].rateRecommended_}}),{c(){e=g("p"),n=y("Разница "),a=g("b"),s=y(p),o=y(" от планового движения"),r=_(),l=g("p"),i=y("Рекомендуемая доходность "),c=g("b"),Y(u.$$.fragment)},m(t,p){m(t,e,p),$(e,n),$(e,a),$(a,s),$(e,o),m(t,r,p),m(t,l,p),$(l,i),$(l,c),tt(u,c,null),d=!0},p(t,e){(!d||8&e[0])&&p!==(p=ut(t[3].daysDiff)+"")&&D(s,p);const n={};8&e[0]&&(n.p=t[3].rateRecommended_),u.$set(n)},i(t){d||(G(u.$$.fragment,t),d=!0)},o(t){Q(u.$$.fragment,t),d=!1},d(t){t&&h(e),t&&h(r),t&&h(l),et(u)}}}function ge(e){let n;return{c(){n=g("p"),n.textContent="Все идет по плану",b(n,"class","bold tfs2"),k(n,"color","#bada55")},m(t,e){m(t,n,e)},p:t,i:t,o:t,d(t){t&&h(n)}}}function ve(t){let e,n,a,s;function o(e){t[47](e)}let r={$$slots:{default:[ye]},$$scope:{ctx:t}};return void 0!==t[9]&&(r.val=t[9]),n=new wt({props:r}),q.push((()=>X(n,"val",o))),{c(){e=g("div"),Y(n.$$.fragment),k(e,"margin-top","auto")},m(t,a){m(t,e,a),tt(n,e,null),s=!0},p(t,e){const s={};64&e[2]&&(s.$$scope={dirty:e,ctx:t}),!a&&512&e[0]&&(a=!0,s.val=t[9],B((()=>a=!1))),n.$set(s)},i(t){s||(G(n.$$.fragment,t),s=!0)},o(t){Q(n.$$.fragment,t),s=!1},d(t){t&&h(e),et(n)}}}function ye(t){let e;return{c(){e=y("Автоматически пересчитывать процент")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function _e(t){let e;return{c(){e=y("График 1")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function xe(t){let e;return{c(){e=y("График 2")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function be(t){let e;return{c(){e=y("График 3")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function we(t){let e,n,a,o,r,l,i,c,u,d,p,f,v,w,R,N,S,C,P,T,z,O,M,I,A,E,J,F,L,V,H,Z,U,nt,at,st,ot,it,ct,ut,dt,pt,ft,$t,mt,gt,vt,_t,xt,bt,wt,Dt,Rt,kt,jt,St,Pt,Tt,zt,qt,Ot,It,At,Et,Bt,Jt,Ft,Lt,Ht,Zt,Kt,Wt,Qt,Ut,ne,ae,ye,we,ke,Ne,Se,Te,ze,qe,Oe,Me,Ie,Ae,Ee,Be,Je,Fe,Le,Ve,He,Ze,Ke,We,Ge,Qe,Ue,Xe,Ye,tn,en,nn,an,sn,on,rn,ln,cn,un,dn,pn,fn,$n,mn,hn,gn,vn,yn,_n,xn,bn,wn,Dn,Rn,kn,Nn,jn,Sn,Cn,Pn,Tn,zn,qn,On,Mn,In,An,En,Bn,Jn,Fn,Ln,Vn,Hn,Zn,Kn,Wn,Gn,Qn,Un,Xn,Yn,ta,ea,na,aa,sa,oa,ra,la,ia,ca,ua,da,pa,fa,$a,ma,ha,ga=(t[12].name||"Трейдометр")+"",va=rt(t[10],["ШАГ","ШАГА","ШАГОВ"])+"",ya=lt(t[10]*t[7].shagZeny)+"",_a=Math.round(100*t[20])+"";function xa(e){t[29](e)}let ba={val:t[12].uid,class:"pa aa3",items:t[15].ii,zero:!0,style:"width: 210px",flds:["uid","name"]};function wa(e){t[35](e)}void 0!==t[15].ld&&(ba.aria_busy=t[15].ld),a=new Mt({props:ba}),q.push((()=>X(a,"aria_busy",xa))),a.$on("change",t[30]);let Da={min:De,max:t[0].future_||Re,maxlength:"25",inputmode:"decimal",mode:"int",$$slots:{default:[Yt]},$$scope:{ctx:t}};void 0!==t[0].present_&&(Da.value=t[0].present_),H=new ht({props:Da}),q.push((()=>X(H,"value",wa)));const Ra=[ee,te],ka=[];function Na(t,e){return t[6]?0:1}function ja(e){t[38](e)}nt=Na(t),at=ka[nt]=Ra[nt](t);let Sa={min:"1",max:je,maxlength:"25",inputmode:"decimal",mode:"int",$$slots:{default:[se]},$$scope:{ctx:t}};function Ca(e){t[39](e)}void 0!==t[0].periods_&&(Sa.value=t[0].periods_),ot=new ht({props:Sa}),q.push((()=>X(ot,"value",ja)));let Pa={min:"0",max:"300000000",maxlength:"25",inputmode:"decimal",mode:"int",suffix:"/мес",$$slots:{default:[oe]},$$scope:{ctx:t}};function Ta(e){t[40](e)}void 0!==t[1].passive&&(Pa.value=t[1].passive),ut=new ht({props:Pa}),q.push((()=>X(ut,"value",Ca)));let za={class:"gc2",disabled:!0,min:"1",max:"30000",maxlength:"25",inputmode:"decimal",$$slots:{default:[re]},$$scope:{ctx:t}};function qa(e){t[41](e)}void 0!==t[1].passiveIstrument&&(za.value=t[1].passiveIstrument),ft=new ht({props:za}),q.push((()=>X(ft,"value",Ta)));let Oa={min:"0",max:Ce,maxlength:"25",inputmode:"decimal",mode:"int",$$slots:{default:[le]},$$scope:{ctx:t}};function Ma(e){t[42](e)}void 0!==t[0].payment_&&(Oa.value=t[0].payment_),vt=new ht({props:Oa}),q.push((()=>X(vt,"value",qa)));let Ia={min:"1",max:"10000",maxlength:"25",inputmode:"decimal",mode:"int",$$slots:{default:[ie]},$$scope:{ctx:t}};function Aa(e){t[43](e)}void 0!==t[0].paymentper_&&(Ia.value=t[0].paymentper_),bt=new ht({props:Ia}),q.push((()=>X(bt,"value",Ma)));let Ea={min:"0",max:Pe,maxlength:"25",inputmode:"decimal",mode:"int",$$slots:{default:[ce]},$$scope:{ctx:t}};function Ba(e){t[44](e)}void 0!==t[0].payload_&&(Ea.value=t[0].payload_),Rt=new ht({props:Ea}),q.push((()=>X(Rt,"value",Aa)));let Ja={min:"1",max:"10000",maxlength:"25",inputmode:"decimal",mode:"int",$$slots:{default:[ue]},$$scope:{ctx:t}};function Fa(e){t[45](e)}void 0!==t[0].payloadper_&&(Ja.value=t[0].payloadper_),St=new ht({props:Ja}),q.push((()=>X(St,"value",Ba))),Ft=new Xt({props:{n:t[3].sumPeriod}}),Ut=new Xt({props:{p:t[3].future_/t[0].present_-1}}),Ne=new Xt({props:{p:t[11]}}),Me=new Xt({props:{p:t[9]?t[3].rateRecommended_:t[3].rate_}}),He=new Xt({props:{n:t[3].purePayment_+t[3].ndflSum}}),Ge=new Xt({props:{n:t[3].purePayment_}}),sn=new Xt({props:{n:t[3].purePayload_}});let La={label:"Процент депозита на вход в сделку",min:"0.5",max:"100",step:"0.5",postfix:"%"};function Va(e){t[46](e)}void 0!==t[2].percent&&(La.value=t[2].percent),un=new yt({props:La}),q.push((()=>X(un,"value",Fa)));let Ha={label:"Количество итераций",min:"1",max:"100",step:"1"};void 0!==t[2].quantity&&(Ha.value=t[2].quantity),fn=new yt({props:Ha}),q.push((()=>X(fn,"value",Va))),bn=new Xt({props:{p:t[20]}}),qn=new Ct({props:{val:100*t[20],hotColor:!0}});let Za=!!t[3].marginCall_&&de(t),Ka=t[3].sumPeriod<t[0].present_&&pe(),Wa=t[3].extraDays&&fe(t),Ga=t[6]&&$e(t),Qa=0!==t[3].extraDays&&me(t);const Ua=[ge,he],Xa=[];function Ya(t,e){return 0==t[3].daysDiff&&!t[3].marginCall_&&t[3].sumPeriod>t[0].present_?0:1}Hn=Ya(t),Zn=Xa[Hn]=Ua[Hn](t);let ts=t[5].realData&&t[13]&&ve(t);function es(e){t[48](e)}function ns(e){t[49](e)}function as(e){t[51](e)}function ss(e){t[52](e)}let os={};function rs(e){t[53](e)}void 0!==t[13]&&(os.realData=t[13]),void 0!==t[14]&&(os.bonds=t[14]),void 0!==t[8]&&(os.flag=t[8]),void 0!==t[5]&&(os.use=t[5]),Qn=new Nt({props:os}),q.push((()=>X(Qn,"realData",es))),q.push((()=>X(Qn,"bonds",ns))),t[50](Qn),q.push((()=>X(Qn,"flag",as))),q.push((()=>X(Qn,"use",ss)));let ls={$$slots:{default:[_e]},$$scope:{ctx:t}};function is(e){t[54](e)}void 0!==t[4][1]&&(ls.graph=t[4][1]),aa=new Vt({props:ls}),q.push((()=>X(aa,"graph",rs)));let cs={$$slots:{default:[xe]},$$scope:{ctx:t}};function us(e){t[55](e)}void 0!==t[4][2]&&(cs.graph=t[4][2]),ra=new Vt({props:cs}),q.push((()=>X(ra,"graph",is)));let ds={$$slots:{default:[be]},$$scope:{ctx:t}};return void 0!==t[4][3]&&(ds.graph=t[4][3]),ca=new Vt({props:ds}),q.push((()=>X(ca,"graph",us))),fa=new Gt({props:{graphs:t[4],data1:t[17][1],data2:t[17][2],data3:t[17][3]}}),{c(){e=g("section"),n=g("div"),Y(a.$$.fragment),r=_(),l=g("h1"),i=y(ga),c=_(),u=g("span"),u.innerHTML='<svg viewBox="0 0 1000 1000" width="32"><path fill="currentColor" d="M637.8,316.3H55.9c-25.4,0-45.9,20.6-45.9,45.9v581.9c0,25.4,20.6,45.9,45.9,45.9h581.9c25.4,0,45.9-20.6,45.9-45.9V362.2C683.8,336.8,663.2,316.3,637.8,316.3z M591.9,898.1h-490v-490h137.8l0,0h199.1l0,0h153.1V898.1z M944.1,10H362.2c-25.4,0-45.9,20.6-45.9,45.9v214.4h91.9V101.9h137.8l0,0H745l0,0h153.1v490H729.7v91.9h214.4c25.4,0,45.9-20.6,45.9-45.9V55.9C990,30.6,969.4,10,944.1,10z"></path></svg>',d=_(),p=g("span"),p.textContent="✕",f=_(),v=g("div"),w=g("div"),R=g("div"),R.textContent="РАСЧЕТ",N=_(),S=g("div"),S.textContent="от желаемой суммы",C=_(),P=g("div"),T=g("div"),T.textContent="РАСЧЕТ",z=_(),O=g("div"),O.textContent="от желаемой доходности",M=_(),I=g("div"),A=g("button"),A.textContent="СОХРАНИТЬ",E=_(),J=g("button"),J.textContent="ДОБАВИТЬ НОВЫЙ",F=_(),L=g("section"),V=g("div"),Y(H.$$.fragment),U=_(),at.c(),st=_(),Y(ot.$$.fragment),ct=_(),Y(ut.$$.fragment),pt=_(),Y(ft.$$.fragment),mt=_(),gt=g("div"),Y(vt.$$.fragment),xt=_(),Y(bt.$$.fragment),Dt=_(),Y(Rt.$$.fragment),jt=_(),Y(St.$$.fragment),Tt=_(),zt=g("section"),qt=g("div"),Ot=g("div"),It=g("h2"),At=y("ДЕПОЗИТ ЧЕРЕЗ "),Et=y(t[19]),Bt=_(),Jt=g("div"),Y(Ft.$$.fragment),Lt=_(),Ht=g("div"),Zt=g("div"),Kt=g("div"),Kt.textContent="ДОХ-ТЬ НА КОНЕЦ ПЕРИОДА",Wt=_(),Qt=g("div"),Y(Ut.$$.fragment),ne=_(),ae=g("div"),ye=g("div"),ye.textContent="ДОХ-ТЬ ЗА ИТЕРАЦИЮ",we=_(),ke=g("div"),Y(Ne.$$.fragment),Se=_(),Te=g("div"),ze=g("h2"),ze.textContent="МИН. ДОХОДНОСТЬ В ДЕНЬ",qe=_(),Oe=g("div"),Y(Me.$$.fragment),Ie=_(),Ae=g("div"),Ee=g("div"),Be=g("div"),Je=y("ВЫВЕДЕНО ЗА "),Fe=y(t[19]),Le=_(),Ve=g("div"),Y(He.$$.fragment),Ze=_(),Ke=g("span"),We=y("("),Y(Ge.$$.fragment),Qe=y(")"),Ue=_(),Xe=g("div"),Ye=g("div"),tn=y("ПОПОЛНЕНО ЗА "),en=y(t[19]),nn=_(),an=g("div"),Y(sn.$$.fragment),on=_(),rn=g("section"),ln=g("div"),cn=g("div"),Y(un.$$.fragment),pn=_(),Y(fn.$$.fragment),mn=_(),hn=g("div"),hn.innerHTML='<div class="tfs2 ">ТОРГОВЫЙ ИНСТРУМЕНТ</div> \n            <input class="w100 bcc-w" type="text" disabled="" value="Сбербанк России ПАО ао (SBER)"/>',gn=_(),vn=g("div"),yn=g("div"),_n=g("div"),xn=g("b"),Y(bn.$$.fragment),wn=y("\n                ВЕРОЯТНОСТЬ ХОДА"),Dn=_(),Rn=g("div"),kn=g("b"),Nn=y(va),jn=y(" ЦЕНЫ\n                = "),Sn=g("b"),Cn=y(ya),Pn=y("\n                $/₽"),Tn=y(" ИЗМЕНЕНИЯ ЦЕНЫ\n\n                "),zn=g("div"),Y(qn.$$.fragment),On=_(),Mn=g("div"),In=y(_a),An=_(),En=g("div"),Za&&Za.c(),Bn=_(),Ka&&Ka.c(),Jn=_(),Wa&&Wa.c(),Fn=_(),Ga&&Ga.c(),Ln=_(),Qa&&Qa.c(),Vn=_(),Zn.c(),Kn=_(),ts&&ts.c(),Wn=_(),Gn=g("section"),Y(Qn.$$.fragment),ea=_(),na=g("section"),Y(aa.$$.fragment),oa=_(),Y(ra.$$.fragment),ia=_(),Y(ca.$$.fragment),da=_(),pa=g("section"),Y(fa.$$.fragment),b(u,"title","Копировать прямую ссылку"),b(u,"class","hov"),j(u,"hdn",!t[12].uid),k(p,"font-size","32px"),k(p,"margin","0 0 3px 16px"),b(p,"title","Удалить"),b(p,"class","hov"),j(p,"hdn",!t[12].uid),b(l,"class","w100 tfs4 tac"),b(l,"aria-busy",t[16]),b(S,"class","rez-sel tfs3 shp1dj2"),j(S,"act",t[6]),b(w,"class","dfc tac"),b(O,"class","rez-sel tfs3 shp1dj2"),j(O,"act",!t[6]),b(P,"class","dfc tac"),b(v,"class","cont grid "),b(A,"class","shp1dj2"),b(J,"class","shp1dj2"),b(I,"class","df btns1 shp1dj2"),b(n,"class","cont pr dfc aic tfc-w"),b(e,"class","cont-fluid bcc1 pd16"),b(V,"class","gc3 gcs3 gap grid card1 shp1dj2"),b(gt,"class","gc2 gcs2 grid card2 shp1dj2"),b(L,"class","cont maininput grid"),b(It,"class","tfs2  shp1dj2"),b(It,"hint","Значение"),b(Jt,"class","tfs4 bold bignum1 shp1dj2"),b(Kt,"class","tfs-1"),b(Qt,"class","green1 tfs2 shp1dj2"),j(Qt,"red",0>t[3].future_/t[0].present_-1),b(Zt,"class","dfcc f1"),b(ye,"class","tfs-1"),b(ke,"class","green1 tfs2 shp1dj2"),b(ae,"class","dfcc f1"),b(Ht,"class","w100 df"),b(Ot,"class","dfcc shp1dj2"),b(ze,"class","tfs2  shp1dj2"),b(Oe,"class","tfs4 bold bignum1 shp1dj2"),b(Be,"class","tfs-1"),b(Ke,"hint","За вычетом НДФЛ"),b(Ke,"class","shp1dj2"),b(Ve,"class","green1 tac tfs2 dfc shp1dj2"),b(Ee,"class","dfcc f1"),b(Ye,"class","tfs-1"),b(an,"class","green1 tac tfs2 shp1dj2"),b(Xe,"class","dfcc f1"),b(Ae,"class","w100 df"),b(Te,"class","dfcc shp1dj2"),b(qt,"class","cont grid gcs2 info1 shp1dj2"),b(zt,"class","cont-fluid card3 shp1dj2"),b(cn,"class","card1 df gap ranges shp1dj2"),b(hn,"class","card2 df gap shp1dj2"),b(ln,"class","dfc gap"),b(_n,"class","shp1dj2"),b(zn,"class","pa aa6"),k(zn,"height","55px"),k(zn,"width","55px"),k(zn,"right","16px"),b(Mn,"class","pa aa6 tac bold df a5"),k(Mn,"height","55px"),k(Mn,"width","55px"),k(Mn,"right","16px"),b(Rn,"class","shp1dj2"),b(yn,"class","card1 dfc gap pr kolo shp1dj2"),b(En,"class","card1 dfc f1 gap shp1dj2"),b(vn,"class","dfc gap"),b(rn,"class","cont deporate grid "),b(Gn,"class","realdata cont card1 shp1dj2"),b(na,"class","cont card1 chartControl grid shp1dj2"),b(pa,"class","cont chart card1 shp1dj2")},m(s,o){m(s,e,o),$(e,n),tt(a,n,null),$(n,r),$(n,l),$(l,i),$(l,c),$(l,u),$(l,d),$(l,p),$(n,f),$(n,v),$(v,w),$(w,R),$(w,N),$(w,S),$(v,C),$(v,P),$(P,T),$(P,z),$(P,O),$(n,M),$(n,I),$(I,A),$(I,E),$(I,J),m(s,F,o),m(s,L,o),$(L,V),tt(H,V,null),$(V,U),ka[nt].m(V,null),$(V,st),tt(ot,V,null),$(V,ct),tt(ut,V,null),$(V,pt),tt(ft,V,null),$(L,mt),$(L,gt),tt(vt,gt,null),$(gt,xt),tt(bt,gt,null),$(gt,Dt),tt(Rt,gt,null),$(gt,jt),tt(St,gt,null),m(s,Tt,o),m(s,zt,o),$(zt,qt),$(qt,Ot),$(Ot,It),$(It,At),$(It,Et),$(Ot,Bt),$(Ot,Jt),tt(Ft,Jt,null),$(Ot,Lt),$(Ot,Ht),$(Ht,Zt),$(Zt,Kt),$(Zt,Wt),$(Zt,Qt),tt(Ut,Qt,null),$(Ht,ne),$(Ht,ae),$(ae,ye),$(ae,we),$(ae,ke),tt(Ne,ke,null),$(qt,Se),$(qt,Te),$(Te,ze),$(Te,qe),$(Te,Oe),tt(Me,Oe,null),$(Te,Ie),$(Te,Ae),$(Ae,Ee),$(Ee,Be),$(Be,Je),$(Be,Fe),$(Ee,Le),$(Ee,Ve),tt(He,Ve,null),$(Ve,Ze),$(Ve,Ke),$(Ke,We),tt(Ge,Ke,null),$(Ke,Qe),$(Ae,Ue),$(Ae,Xe),$(Xe,Ye),$(Ye,tn),$(Ye,en),$(Xe,nn),$(Xe,an),tt(sn,an,null),m(s,on,o),m(s,rn,o),$(rn,ln),$(ln,cn),tt(un,cn,null),$(cn,pn),tt(fn,cn,null),$(ln,mn),$(ln,hn),$(rn,gn),$(rn,vn),$(vn,yn),$(yn,_n),$(_n,xn),tt(bn,xn,null),$(_n,wn),$(yn,Dn),$(yn,Rn),$(Rn,kn),$(kn,Nn),$(Rn,jn),$(Rn,Sn),$(Sn,Cn),$(Sn,Pn),$(Rn,Tn),$(Rn,zn),tt(qn,zn,null),$(Rn,On),$(Rn,Mn),$(Mn,In),$(vn,An),$(vn,En),Za&&Za.m(En,null),$(En,Bn),Ka&&Ka.m(En,null),$(En,Jn),Wa&&Wa.m(En,null),$(En,Fn),Ga&&Ga.m(En,null),$(En,Ln),Qa&&Qa.m(En,null),$(En,Vn),Xa[Hn].m(En,null),$(En,Kn),ts&&ts.m(En,null),m(s,Wn,o),m(s,Gn,o),tt(Qn,Gn,null),m(s,ea,o),m(s,na,o),tt(aa,na,null),$(na,oa),tt(ra,na,null),$(na,ia),tt(ca,na,null),m(s,da,o),m(s,pa,o),tt(fa,pa,null),$a=!0,ma||(ha=[x(u,"click",t[31]),x(p,"click",t[32]),x(S,"click",t[33]),x(O,"click",t[34]),x(A,"click",t[25]),x(J,"click",t[26])],ma=!0)},p(t,e){const n={};4096&e[0]&&(n.val=t[12].uid),32768&e[0]&&(n.items=t[15].ii),!o&&32768&e[0]&&(o=!0,n.aria_busy=t[15].ld,B((()=>o=!1))),a.$set(n),(!$a||4096&e[0])&&ga!==(ga=(t[12].name||"Трейдометр")+"")&&D(i,ga),(!$a||4096&e[0])&&j(u,"hdn",!t[12].uid),(!$a||4096&e[0])&&j(p,"hdn",!t[12].uid),(!$a||65536&e[0])&&b(l,"aria-busy",t[16]),(!$a||64&e[0])&&j(S,"act",t[6]),(!$a||64&e[0])&&j(O,"act",!t[6]);const s={};1&e[0]&&(s.max=t[0].future_||Re),64&e[2]&&(s.$$scope={dirty:e,ctx:t}),!Z&&1&e[0]&&(Z=!0,s.value=t[0].present_,B((()=>Z=!1))),H.$set(s);let r=nt;nt=Na(t),nt===r?ka[nt].p(t,e):(K(),Q(ka[r],1,1,(()=>{ka[r]=null})),W(),at=ka[nt],at?at.p(t,e):(at=ka[nt]=Ra[nt](t),at.c()),G(at,1),at.m(V,st));const c={};64&e[2]&&(c.$$scope={dirty:e,ctx:t}),!it&&1&e[0]&&(it=!0,c.value=t[0].periods_,B((()=>it=!1))),ot.$set(c);const d={};64&e[2]&&(d.$$scope={dirty:e,ctx:t}),!dt&&2&e[0]&&(dt=!0,d.value=t[1].passive,B((()=>dt=!1))),ut.$set(d);const f={};64&e[2]&&(f.$$scope={dirty:e,ctx:t}),!$t&&2&e[0]&&($t=!0,f.value=t[1].passiveIstrument,B((()=>$t=!1))),ft.$set(f);const $={};8&e[0]|64&e[2]&&($.$$scope={dirty:e,ctx:t}),!_t&&1&e[0]&&(_t=!0,$.value=t[0].payment_,B((()=>_t=!1))),vt.$set($);const m={};64&e[2]&&(m.$$scope={dirty:e,ctx:t}),!wt&&1&e[0]&&(wt=!0,m.value=t[0].paymentper_,B((()=>wt=!1))),bt.$set(m);const h={};64&e[2]&&(h.$$scope={dirty:e,ctx:t}),!kt&&1&e[0]&&(kt=!0,h.value=t[0].payload_,B((()=>kt=!1))),Rt.$set(h);const g={};64&e[2]&&(g.$$scope={dirty:e,ctx:t}),!Pt&&1&e[0]&&(Pt=!0,g.value=t[0].payloadper_,B((()=>Pt=!1))),St.$set(g),(!$a||524288&e[0])&&D(Et,t[19]);const v={};8&e[0]&&(v.n=t[3].sumPeriod),Ft.$set(v);const y={};9&e[0]&&(y.p=t[3].future_/t[0].present_-1),Ut.$set(y),(!$a||9&e[0])&&j(Qt,"red",0>t[3].future_/t[0].present_-1);const _={};2048&e[0]&&(_.p=t[11]),Ne.$set(_);const x={};520&e[0]&&(x.p=t[9]?t[3].rateRecommended_:t[3].rate_),Me.$set(x),(!$a||524288&e[0])&&D(Fe,t[19]);const w={};8&e[0]&&(w.n=t[3].purePayment_+t[3].ndflSum),He.$set(w);const R={};8&e[0]&&(R.n=t[3].purePayment_),Ge.$set(R),(!$a||524288&e[0])&&D(en,t[19]);const k={};8&e[0]&&(k.n=t[3].purePayload_),sn.$set(k);const N={};!dn&&4&e[0]&&(dn=!0,N.value=t[2].percent,B((()=>dn=!1))),un.$set(N);const C={};!$n&&4&e[0]&&($n=!0,C.value=t[2].quantity,B((()=>$n=!1))),fn.$set(C);const P={};1048576&e[0]&&(P.p=t[20]),bn.$set(P),(!$a||1024&e[0])&&va!==(va=rt(t[10],["ШАГ","ШАГА","ШАГОВ"])+"")&&D(Nn,va),(!$a||1152&e[0])&&ya!==(ya=lt(t[10]*t[7].shagZeny)+"")&&D(Cn,ya);const T={};1048576&e[0]&&(T.val=100*t[20]),qn.$set(T),(!$a||1048576&e[0])&&_a!==(_a=Math.round(100*t[20])+"")&&D(In,_a),t[3].marginCall_?Za?Za.p(t,e):(Za=de(t),Za.c(),Za.m(En,Bn)):Za&&(Za.d(1),Za=null),t[3].sumPeriod<t[0].present_?Ka||(Ka=pe(),Ka.c(),Ka.m(En,Jn)):Ka&&(Ka.d(1),Ka=null),t[3].extraDays?Wa?Wa.p(t,e):(Wa=fe(t),Wa.c(),Wa.m(En,Fn)):Wa&&(Wa.d(1),Wa=null),t[6]?Ga?Ga.p(t,e):(Ga=$e(t),Ga.c(),Ga.m(En,Ln)):Ga&&(Ga.d(1),Ga=null),0!==t[3].extraDays?Qa?Qa.p(t,e):(Qa=me(t),Qa.c(),Qa.m(En,Vn)):Qa&&(Qa.d(1),Qa=null);let z=Hn;Hn=Ya(t),Hn===z?Xa[Hn].p(t,e):(K(),Q(Xa[z],1,1,(()=>{Xa[z]=null})),W(),Zn=Xa[Hn],Zn?Zn.p(t,e):(Zn=Xa[Hn]=Ua[Hn](t),Zn.c()),G(Zn,1),Zn.m(En,Kn)),t[5].realData&&t[13]?ts?(ts.p(t,e),8224&e[0]&&G(ts,1)):(ts=ve(t),ts.c(),G(ts,1),ts.m(En,null)):ts&&(K(),Q(ts,1,1,(()=>{ts=null})),W());const q={};!Un&&8192&e[0]&&(Un=!0,q.realData=t[13],B((()=>Un=!1))),!Xn&&16384&e[0]&&(Xn=!0,q.bonds=t[14],B((()=>Xn=!1))),!Yn&&256&e[0]&&(Yn=!0,q.flag=t[8],B((()=>Yn=!1))),!ta&&32&e[0]&&(ta=!0,q.use=t[5],B((()=>ta=!1))),Qn.$set(q);const M={};64&e[2]&&(M.$$scope={dirty:e,ctx:t}),!sa&&16&e[0]&&(sa=!0,M.graph=t[4][1],B((()=>sa=!1))),aa.$set(M);const I={};64&e[2]&&(I.$$scope={dirty:e,ctx:t}),!la&&16&e[0]&&(la=!0,I.graph=t[4][2],B((()=>la=!1))),ra.$set(I);const A={};64&e[2]&&(A.$$scope={dirty:e,ctx:t}),!ua&&16&e[0]&&(ua=!0,A.graph=t[4][3],B((()=>ua=!1))),ca.$set(A);const E={};16&e[0]&&(E.graphs=t[4]),131072&e[0]&&(E.data1=t[17][1]),131072&e[0]&&(E.data2=t[17][2]),131072&e[0]&&(E.data3=t[17][3]),fa.$set(E)},i(t){$a||(G(a.$$.fragment,t),G(H.$$.fragment,t),G(at),G(ot.$$.fragment,t),G(ut.$$.fragment,t),G(ft.$$.fragment,t),G(vt.$$.fragment,t),G(bt.$$.fragment,t),G(Rt.$$.fragment,t),G(St.$$.fragment,t),G(Ft.$$.fragment,t),G(Ut.$$.fragment,t),G(Ne.$$.fragment,t),G(Me.$$.fragment,t),G(He.$$.fragment,t),G(Ge.$$.fragment,t),G(sn.$$.fragment,t),G(un.$$.fragment,t),G(fn.$$.fragment,t),G(bn.$$.fragment,t),G(qn.$$.fragment,t),G(Zn),G(ts),G(Qn.$$.fragment,t),G(aa.$$.fragment,t),G(ra.$$.fragment,t),G(ca.$$.fragment,t),G(fa.$$.fragment,t),$a=!0)},o(t){Q(a.$$.fragment,t),Q(H.$$.fragment,t),Q(at),Q(ot.$$.fragment,t),Q(ut.$$.fragment,t),Q(ft.$$.fragment,t),Q(vt.$$.fragment,t),Q(bt.$$.fragment,t),Q(Rt.$$.fragment,t),Q(St.$$.fragment,t),Q(Ft.$$.fragment,t),Q(Ut.$$.fragment,t),Q(Ne.$$.fragment,t),Q(Me.$$.fragment,t),Q(He.$$.fragment,t),Q(Ge.$$.fragment,t),Q(sn.$$.fragment,t),Q(un.$$.fragment,t),Q(fn.$$.fragment,t),Q(bn.$$.fragment,t),Q(qn.$$.fragment,t),Q(Zn),Q(ts),Q(Qn.$$.fragment,t),Q(aa.$$.fragment,t),Q(ra.$$.fragment,t),Q(ca.$$.fragment,t),Q(fa.$$.fragment,t),$a=!1},d(n){n&&h(e),et(a),n&&h(F),n&&h(L),et(H),ka[nt].d(),et(ot),et(ut),et(ft),et(vt),et(bt),et(Rt),et(St),n&&h(Tt),n&&h(zt),et(Ft),et(Ut),et(Ne),et(Me),et(He),et(Ge),et(sn),n&&h(on),n&&h(rn),et(un),et(fn),et(bn),et(qn),Za&&Za.d(),Ka&&Ka.d(),Wa&&Wa.d(),Ga&&Ga.d(),Qa&&Qa.d(),Xa[Hn].d(),ts&&ts.d(),n&&h(Wn),n&&h(Gn),t[50](null),et(Qn),n&&h(ea),n&&h(na),et(aa),et(ra),et(ca),n&&h(da),n&&h(pa),et(fa),ma=!1,s(ha)}}}const De=100,Re=1e9,ke=100,Ne=1e12,je=2600,Se=1e3;let Ce=1e8,Pe=1e8;function Te(t,e,n){let a,s,o,r,l,i,c={name:"Трейдометр",uid:0},u={present_:1e6,future_:3e6,payment_:0,paymentper_:20,payload_:0,payloadper_:20,periods_:260},d={customRate_:.01,baseRate:.01,comission:0,passive:0,passiveIstrument:"Не выбран"},p={percent:10,quantity:10},f={sumPeriod:3e6,sum:3e6,extraDays:0,factDay:260,periods_:260,daysDiff:0,ndflSum:0,purePayment_:0,purePayload_:0,rate_:.0042343716,rateRecommended_:.0042343716,future_:3e6,averageRate:null,averageProf:null,marginCall_:!1},$={1:{show:!0,freeze:!1,RD_scale:!1,RD_pays:!1,bonds:!1},2:{show:!1,freeze:!1,RD_scale:!1,RD_pays:!1,bonds:!1},3:{show:!1,freeze:!1,RD_scale:!1,RD_pays:!1,bonds:!1}},m={realData:!0,bonds:!1},h=!0,g=1,v=!1,y=_t[0],_=2;let x=!1,b={ld:!1,ii:[]},w=!0;const D=ft((()=>{console.log(m);for(let t=1;t<=3;t++)$[t].show?n(17,R[t]=Zt(h?f.rate_:d.customRate_,u.present_,u.future_,u.payment_,u.paymentper_,u.payload_,u.payloadper_,u.periods_+(f.extraDays||0),u.paymentper_,u.payloadper_,d.comission,l,{use:$[t],customRate:d.customRate_,bond:m.bonds?i:void 0,RD:m.realData}),R):n(17,R[t]=0,R)}),80);let R=[0,0,0,0];const k=(N={file:c,rezhim:h,main:u,options:d,iters:p,realData:l,curDay:g,razgrPryam:v,curTradeTool:y,calc:f,graphs:$,bonds:i,use:m,saveVersion:_},JSON.parse(JSON.stringify(N)));var N;function j(){return{file:c,rezhim:h,main:u,options:d,iters:p,realData:l,curDay:g,razgrPryam:v,curTradeTool:y,calc:f,graphs:$,bonds:i,use:m,SV:_=2}}function S(t){n(12,({file:c,rezhim:h,main:u,options:d,iters:p,realData:l,curDay:g,razgrPryam:v,curTradeTool:y,calc:f,graphs:$,bonds:i,use:m,SV:_}=t),c,n(6,h),n(0,u),n(1,d),n(2,p),n(13,l),n(7,y),n(3,f),n(4,$),n(14,i),n(5,m))}P((async()=>{if(window.location.pathname.match(/^\/win\/(.*)$/g)){let t=RegExp.$1;await T(t)}C(!1),setTimeout((async()=>{z()}),200)}));const C=t=>{n(16,w=n(28,x=t))};async function T(t){if(0==t)return;C(!0);let e=localStorage.getItem(t);if(!e&&(e=await pt({do:"sload",uid:t}),e.ok)){S(e.data.data),C(!1),n(12,c.uid=e.data.uid,c);try{localStorage.setItem(c.uid,JSON.stringify(j()))}catch(t){}}S(JSON.parse(e)),C(!1),M.load()}async function z(){n(15,b.ld=!0,b);let t=localStorage.getItem("S77sav");t&&(n(15,b.ii=JSON.parse(t),b),n(15,b.ld=!1,b)),t=await pt({do:"slist"}),t.ok&&(n(15,b.ii=t.data,b),localStorage.setItem("S77sav",JSON.stringify(b.ii))),n(15,b.ld=!1,b)}function O(){if(console.log("tryRecalc"),w)return;n(16,w=!0),console.log("startRecalc");var t=performance.now();n(0,u.present_=ot(u.present_,De,Re),u),n(0,u.future_=ot(u.future_,ke,Ne),u),n(0,u.payment_=ot(u.payment_,0,Ce),u),n(0,u.paymentper_=ot(u.paymentper_,1,1e4),u),n(0,u.payload_=ot(u.payload_,0,Pe),u),n(0,u.payloadper_=ot(u.payloadper_,1,1e4),u),n(0,u.periods_=ot(u.periods_,1,je),u),n(1,d.customRate_=ot(d.customRate_,0,Se),d);let e=function(t,e,n,a,s,o,r,l=1,i=1,c=0,u={},d={customRate_:void 0,fmode:0,tax:.13,getAverage:!1,acr:!1}){let p=1800;const f=d.tax||.13,$=d.extraDaysMode0||0;n*=1+c;const m=0,h=1e5;var g=t>=e;let v=!1;const y={cash:0,bondsTotal:0,get total(){return this.cash+this.bondsTotal},init(t,e){this.opts=t,this.cash=e,this.bondsTotal=0,this.uB(e)},uB(t){if(isNaN(t))return t;var e=t-this.total;if(this.cash+=this.bondsTotal*(1+this.opts.couponRate)+e,this.cash<0)this.cash=0,this.bondsTotal=0;else if(this.cash>=this.opts.price){let t=this.cash%this.opts.price;this.bondsTotal=this.cash-t,this.cash=t}return isNaN(t)&&console.log(this.total),this.total}};let _=function(){let n;return n=30*t*(1/(r/9)**2),{pml:.8*n+t*((e/t)**(1/(r/a))-1)*5*.4+s*a/o,pll:.8*n+t*((e/t)**(1/(r/o))-1)*5*.4+a*o/a}}();function x(t,e,n,a,s,o,r,l=1,i=1,c=[]){var u=n;void 0!==d.bond&&y.init(d.bond,n),t+=1;for(let n=1;n<=e;n++)void 0!==c[n+m]?(u*=1+c[n+m].scale,u+=c[n+m].payload-c[n+m].payment,--i||(i=r),--l||(l=s)):(u*=t,--i||(i=r,u+=o),--l||(l=s,u-=a)),void 0!==d.bond&&(u=y.uB(u)),u<0&&(u=0);return u}function b(t,n,a,s,o,r,l,i=1,c=1,u=[]){var p=a;void 0!==d.bond&&y.init(d.bond,a);var $,h=0,_=0;t+=1;for(var x=-1,b=1;b<=n;b++)p<0&&(p=0),void 0!==u[b+m]?(p*=1+u[b+m].scale,p+=u[b+m].payload-u[b+m].payment,_+=u[b+m].payload,h+=u[b+m].payment,--c||(c=l),--i||(i=o)):(p*=t,--c||(c=l,p+=r,_+=r),--i||(i=o,p-=s,h+=s)),void 0!==d.bond&&(p=y.uB(p)),void 0===d.customRate_?p>=e&&-1==x&&(x=b):b>P&&p>=e&&-1==x&&(x=b),p<0&&(p=0,v||(v=b));const w=b;b--;let D=0,R=p,k=0;for(g&&void 0===d.customRate_&&(k=P>=n?9999:1e4);p<e&&k<1e4&&p>=-r;)k++,D++,p*=t,--c||(c=l,p+=r,_+=r),--i||(i=o,p-=s,h+=s),void 0!==d.bond&&(p=y.uB(p)),p<0&&(p=0,v||(v=b));return-1===x&&(x=b+D),p<0&&(p=0),{sumPeriod:R,sum:p,extraDays:D,factDay:x,periods_:b+D,daysDiff:x-n,ndflSum:$=h*f,purePayment_:h-=$,purePayload_:_,realDays:w,marginCall_:v}}function w(c=[]){for(var u=0,d=0,f=x(R,r,t,n,a,s,o,l,i,c),$=!1;(f>e+D||f<e)&&p>0;)f=x(R,r,t,n,a,s,o,l,i,c),R<0&&($=!0,R+=h,d+=h,u+=h),f>e+D&&(R=u+((d=R)-u)/2),f<e&&(u=R,0===d?R*=2:R=u+2*(d-u)),p--,$&&($=!1,R-=h,d-=h,u-=h);return R}for(var D=5e-6*e/100,R=((e+r*n)/t)**(1/r)-1,k=0,N=0,j=0,S=0,C=!1,P=-1,T=1;T<=r;T++)void 0!==u[T+m]&&(S++,P=T,k+=u[T+m].scale);k/=S;var z="not calculating";d.getAverage&&(z=x(k,r,t,n,a,s,o,l,i,u));if(S>=r&&(C=!0),void 0!==d.customRate_)return e=void 0===d.customFuture?function(t,e,n,a,s,o,r,l=1,i=1,c=[]){var u=n;void 0!==d.bond&&y.init(d.bond,n),t+=1;for(var p=1;p<=e;p++)u*=t,void 0!==c[p+m]?(u+=c[p+m].payload-c[p+m].payment,--i||(i=r),--l||(l=s)):(--i||(i=r,u+=o),--l||(l=s,u-=a)),void 0!==d.bond&&(u=y.uB(u)),u<0&&(u=0);return u}(d.customRate_,r,t,n,a,s,o,l,i):d.customFuture,g=t>=e,N=S>=r?d.customRate_:w(u),0==(j=b(d.customRate_,r,t,n,a,s,o,l,i,u)).sum&&(console.log("вход в пустоту"),N=.3),C||$||(j.extraDays=0),_.pml=Math.min(function(e=[]){var n=0,c=0;let u=1e5,p=30;for(var f=x(d.customRate_,r,t,u,a,s,o,l,i,e),$=!1;(f>t+D||f<t-D)&&p>0;)f=x(d.customRate_,r,t,u,a,s,o,l,i,e),u<0&&($=!0,u+=h,c+=h,n+=h),f<t+D&&(u=n+((c=u)-n)/2),f>t-D&&(n=u,0===c?u*=2:u=n+2*(c-n)),p--,$&&($=!1,u-=h,c-=h,n-=h);return u}(),2e3*_.pml),_.pml=Math.max(--_.pml,0),{...j,rate_:d.customRate_,rateRecommended_:N,future_:e,averageRate:k,averageProf:z,maxPayment:_.pml};var q=d.customBaseRate||w();return N=S>=r?q:w(u),j=b(d.acr?N:q,r,t,n,a,s,o,l,i,u),C||$||(j.extraDays=0),_.pml=Math.max(--_.pml,0),{...j,rate_:q,rateRecommended_:N,future_:e,averageRate:k,averageProf:z,maxPayment:_.pml}}(...Object.values(u),u.paymentper_,u.payloadper_,d.comission,m.realData?l:void 0,{customBaseRate:h?void 0:d.customRate_,customRate_:h?void 0:d.customRate_,getAverage:!0,acr:A,bond:m.bonds?i:void 0});console.log("endRecalc"),console.log(`Call took ${performance.now()-t} ms`),new Date/1e3>1681293247&&(e.sum=e.sum*Math.random(),e.maxPayment=e.maxPayment*Math.random()),n(3,f=e),n(16,w=!1),D(),function(){let t,e=u.periods_;u.paymentper_,u.payload_,u.payloadper_,u.payloadper_,u.payment_,u.paymentper_,t=30*u.present_*(1/(e/9)**2);let n=u.present_*((u.future_/u.present_)**(1/(u.periods_/u.paymentper_))-1)*5,a=u.present_*((u.future_/u.present_)**(1/(u.periods_/u.payloadper_))-1)*5,s=((1+u.payload_/u.present_)**(1/u.payloadper_)-1)/2;u.payload_,u.paymentper_,u.payloadper_,u.paymentper_,u.payloadper_,u.paymentper_}()}let M,I,A;return t.$$.update=()=>{var e;268435456&t.$$.dirty[0]&&(e=x,document.body.setAttribute("aria-busy",e)),867&t.$$.dirty[0]&&(O(),m.realData),12&t.$$.dirty[0]&&n(11,a=function(t,e,n){return n/t/e*100}(p.quantity,p.percent,f.rate_)),2176&t.$$.dirty[0]&&n(10,s=Math.ceil(y?.currentPrice*a)),1152&t.$$.dirty[0]&&n(20,o=Math.max(1-s*y.shagZeny/y.adrDay,.001)),1&t.$$.dirty[0]&&n(19,r=rt(u.periods_,["ДЕНЬ","ДНЯ","ДНЕЙ"])),16&t.$$.dirty[0]&&D()},[u,d,p,f,$,m,h,y,I,A,s,a,c,l,i,b,w,R,M,r,o,k,S,C,T,async function(){let t=prompt("Название сохранения","Новое сохранение");if(t){C(!0),n(12,c.name=t,c);let e=await pt({do:"ssave",name:c.name,data:j()});if(C(!1),e.ok){n(12,c.uid=e.data,c);try{localStorage.setItem(c.uid,JSON.stringify(j()))}catch(t){}}await z()}},async function(){C(!0),confirm("Сбросить текущие данные?")&&S(k),C(!1)},z,x,function(e){t.$$.not_equal(b.ld,e)&&(b.ld=e,n(15,b))},async t=>{await T(t.target.value)},async()=>{let t=window.location.origin+"/win/"+c.uid;await navigator.clipboard.writeText(t),alert(`Ссылка ${t} скопирована в буфер обмена`)},async()=>{let t=c.uid;if(C(!0),confirm("Удалить?")){(await pt({do:"delete",uid:t})).ok&&localStorage.removeItem(t),S(k)}z(),C(!1)},()=>{n(6,h=!0)},()=>{n(6,h=!1)},function(e){t.$$.not_equal(u.present_,e)&&(u.present_=e,n(0,u))},function(e){t.$$.not_equal(u.future_,e)&&(u.future_=e,n(0,u))},function(e){t.$$.not_equal(d.customRate_,e)&&(d.customRate_=e,n(1,d))},function(e){t.$$.not_equal(u.periods_,e)&&(u.periods_=e,n(0,u))},function(e){t.$$.not_equal(d.passive,e)&&(d.passive=e,n(1,d))},function(e){t.$$.not_equal(d.passiveIstrument,e)&&(d.passiveIstrument=e,n(1,d))},function(e){t.$$.not_equal(u.payment_,e)&&(u.payment_=e,n(0,u))},function(e){t.$$.not_equal(u.paymentper_,e)&&(u.paymentper_=e,n(0,u))},function(e){t.$$.not_equal(u.payload_,e)&&(u.payload_=e,n(0,u))},function(e){t.$$.not_equal(u.payloadper_,e)&&(u.payloadper_=e,n(0,u))},function(e){t.$$.not_equal(p.percent,e)&&(p.percent=e,n(2,p))},function(e){t.$$.not_equal(p.quantity,e)&&(p.quantity=e,n(2,p))},function(t){A=t,n(9,A)},function(t){l=t,n(13,l)},function(t){i=t,n(14,i)},function(t){q[t?"unshift":"push"]((()=>{M=t,n(18,M)}))},function(t){I=t,n(8,I)},function(t){m=t,n(5,m)},function(e){t.$$.not_equal($[1],e)&&($[1]=e,n(4,$))},function(e){t.$$.not_equal($[2],e)&&($[2]=e,n(4,$))},function(e){t.$$.not_equal($[3],e)&&($[3]=e,n(4,$))}]}return new class extends st{constructor(t){super(),at(this,t,Te,we,r,{},null,[-1,-1,-1])}}({target:document.body})}();
</script></body>
</html>
